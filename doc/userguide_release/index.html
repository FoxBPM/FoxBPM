<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   
      <title>FoxBPM6.0 用户向导</title>
      <link rel="stylesheet" type="text/css" href="resources/style.css"><script src="resources/prettify.js" type="text/javascript"></script><meta name="generator" content="DocBook XSL Stylesheets V1.77.1">
   </head>
   <body onLoad="prettyPrint();">
      <div lang="zh_cn">
         <div class="titlepage">
            <div>
               <div>
                  <h1><a name="d5e1"></a>FoxBPM6.0 用户向导
                  </h1>
               </div>
            </div>
            <hr>
         </div>
         <div class="toc">
            <dl>
               <dt><span class="chapter"><a href="#d5e5">1. FoxBPM介绍</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#info.what">1.1. FoxBPM是什么</a></span></dt>
                     <dt><span class="section"><a href="#license">1.2. 授权</a></span></dt>
                     <dt><span class="section"><a href="#download">1.3. 下载</a></span></dt>
                     <dt><span class="section"><a href="#sources">1.4. 源码</a></span></dt>
                     <dt><span class="section"><a href="#required.software">1.5. 所需要的软件</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="section"><a href="#d5e24">1.5.1. JDK 1.5+</a></span></dt>
                           <dt><span class="section"><a href="#d5e28">1.5.2. Eclipse</a></span></dt>
                           <dt><span class="section"><a href="#d5e33">1.5.3. Graphiti(Juno、Kepler、Luna)</a></span></dt>
                           <dt><span class="section"><a href="#d5e38">1.5.4. Groovy (Juno、Kepler、Luna)</a></span></dt>
                           <dt><span class="section"><a href="#d5e47">1.5.5. FoxBPM Eclipse Plugin (6.0)</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="section"><a href="#reporting.problems">1.6. 报告问题</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="chapter"><a href="#GettingStarted">2. 快速入门</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#gs.prerequisites">2.1. </a></span></dt>
                     <dt><span class="section"><a href="#d5e59">2.2. Web环境部署</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="section"><a href="#d5e61">2.2.1. 部署介绍</a></span></dt>
                           <dt><span class="section"><a href="#database_config">2.2.2. 数据库配置</a></span></dt>
                           <dt><span class="section"><a href="#environment_config">2.2.3. 环境配置</a></span></dt>
                           <dt><span class="section"><a href="#deploy_config">2.2.4. 部署</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="section"><a href="#d5e85">2.3. 设计器配置</a></span></dt>
                     <dt><span class="section"><a href="#gs.processDiagram">2.4. 设计流程</a></span></dt>
                     <dt><span class="section"><a href="#d5e198">2.5. 发布流程</a></span></dt>
                     <dt><span class="section"><a href="#d5e218">2.6. web运行</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="chapter"><a href="#GetCode">3. 代码获取及Web环境配置</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#gc.getFoxBPM">3.1. 获取FoxBPM</a></span></dt>
                     <dt><span class="section"><a href="#gc.mavenConfig">3.2. Maven环境配置</a></span></dt>
                     <dt><span class="section"><a href="#gc.webConfig">3.3. Web环境配置</a></span></dt>
                     <dt><span class="section"><a href="#gc.jarConfig">3.4. 依赖Jar配置</a></span></dt>
                     <dt><span class="section"><a href="#gc.runFoxBPM">3.5. 运行FoxBPM</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="chapter"><a href="#bpmn_chapter">4. BPMN2.0节点元素</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#bpmn.info">4.1. BPMN简介</a></span></dt>
                     <dt><span class="section"><a href="#bpmn.process">4.2. 流程定义</a></span></dt>
                     <dt><span class="section"><a href="#bpmn.flowElement">4.3. FoxBPM支持的BPMN元素</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="section"><a href="#d5e552">4.3.1. 事件</a></span></dt>
                           <dt><span class="section"><a href="#d5e668">4.3.2. 活动</a></span></dt>
                           <dt><span class="section"><a href="#d5e865">4.3.3. 网关</a></span></dt>
                           <dt><span class="section"><a href="#d5e951">4.3.4. 线条</a></span></dt>
                           <dt><span class="section"><a href="#d5e971">4.3.5. 图形元素</a></span></dt>
                        </dl>
                     </dd>
                  </dl>
               </dd>
               <dt><span class="chapter"><a href="#EclipseDesigner">5. Foxbpm Web 功能文档</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#d5e994">5.1. foxbpm-common web功能介绍</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="chapter"><a href="#EclipseDesigner">6. 设计器安装手册</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="section"><a href="#eclipse.Installation">6.1. 安装</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="chapter"><a href="#d5e1264">7. eclipse设计器使用手册</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="sect1"><a href="#d5e1266">7.1. 前言</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="#d5e1268">7.1.1. 先决条件</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1276">7.1.2. 适用人群</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1279">7.1.3. 文档内容</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="#d5e1282">7.2. 准备工作</a></span></dt>
                     <dt><span class="sect1"><a href="#d5e1303">7.3. 新建流程</a></span></dt>
                     <dt><span class="sect1"><a href="#d5e1333">7.4. 设计流程图</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="#d5e1336">7.4.1. 通用功能介绍</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1372">7.4.2. 流程定义</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1470">7.4.3. 活动</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1629">7.4.4. 线条</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1640">7.4.5.  事件 </a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1700">7.4.6.  网关 </a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1728">7.4.7. 图形</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="#d5e1733">7.5. 流程定义管理</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="#d5e1737">7.5.1. 发布流程定义</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1746">7.5.2. 更新流程定义</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1755">7.5.3. 删除流程定义</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1764">7.5.4. 下载流程定义</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1770">7.5.5. 创建新版本</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="#d5e1776">7.6. 连接器和选择器</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="#d5e1780">7.6.1. 连接器的创建</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1816">7.6.2. 连接器的注册</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1836">7.6.3. 处理人选择器</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1839">7.6.4.  连接器和选择器的共享</a></span></dt>
                        </dl>
                     </dd>
                     <dt><span class="sect1"><a href="#d5e1842">7.7. 附录：系统默认连接器和选择器功能介绍</a></span></dt>
                     <dd>
                        <dl>
                           <dt><span class="sect2"><a href="#d5e1844">7.7.1. 连接器</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1887">7.7.2. 处理人选择器</a></span></dt>
                           <dt><span class="sect2"><a href="#d5e1988">7.7.3. 任务命令</a></span></dt>
                        </dl>
                     </dd>
                  </dl>
               </dd>
            </dl>
         </div>
         
         
         
         <div lang="">
            <div class="titlepage">
               <div>
                  <div>
                     <h1 class="title"><a name="d5e5"></a>第 1 章 FoxBPM介绍
                     </h1>
                  </div>
               </div>
            </div>
            
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="info.what"></a>1.1. FoxBPM是什么
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p> FoxBPM是一款开源的基于BPMN2.0标准的工作流引擎,由FoxBPM开源联盟组织(FoxBPM OpenSource Union) 进行社区化管理,
                  引擎底层直接支持BPMN2.0国际标准, 吸纳了 jBPM3 、 Activiti5、BonitaBPM 等国际开源流程引擎的精髓,
                  同时提供了强大的中国式流程流转处理,引擎采用微内核+插件形式设计,提供灵活的扩展模式, 建模采
                  用基于BPMN2.0标准的Eclipse设计器和基于Web的流程设计器,不仅仅为审批流程提供了解决方案, 同时还为复杂业务流程编排提供了强大的支持。
                  FoxBPM本身并不具备完整的开发平台功能,它的定位是专门用于集成到现有系统的引擎。 
               </p>
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="license"></a>1.2. 授权
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p>FoxBPM Engine 使用了 <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_top">Apache V2 license
                     授权协议</a></p>
               
            </div>
            
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="download"></a>1.3. 下载
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p><a href="https://github.com/FoxBPM/FoxBPM" target="_top">FoxBPM主页</a></p>
               
            </div>
            
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="sources"></a>1.4. 源码
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p>FoxBPM引擎代码托管在GitHub平台中,采用git来管理源代码,可以通过Git工具拉取源代码 <a href="https://github.com/FoxBPM/FoxBPM" target="_top">GtiHub-FoxBPM</a>
                  
               </p>
               
            </div>
            
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="required.software"></a>1.5. 所需要的软件
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e24"></a>1.5.1. JDK 1.5+
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>FoxBPM引擎支持 jdk1.5以及1.5以上版本jdk,下载地址为 <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_top">Oracle Java SE downloads</a>
                     
                  </p>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e28"></a>1.5.2. Eclipse
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p> FoxBPM设计器插件能够在 Eclipse Juno、Kepler SR2、Luna版本中运行. 
                     <a href="http://eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/keplersr2" target="_top">Eclipse Kepler SR2</a>
                     <a href="http://eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr2" target="_top">Eclipse Juno SR2 </a>
                     
                  </p>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e33"></a>1.5.3. Graphiti(Juno、Kepler、Luna)
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p> 在安装FoxBPM设计器插件之前先要添加Graphiti和Groovy站点信息</p>
                  
                  <p>
                     <code>http://download.eclipse.org/graphiti/updates/0.10.2</code>
                     
                  </p>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e38"></a>1.5.4. Groovy (Juno、Kepler、Luna)
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p> 在安装FoxBPM设计器插件之前先要添加Groovy站点信息</p>
                  
                  <p> Luna:<code>http://dist.springsource.org/release/GRECLIPSE/e4.3/</code></p>
                  
                  <p> Kepler:<code>http://dist.springsource.org/release/GRECLIPSE/e4.3/</code></p>
                  
                  <p>
                     Juno:<code>http://dist.springsource.org/release/GRECLIPSE/e4.2/</code>
                     
                  </p>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e47"></a>1.5.5. FoxBPM Eclipse Plugin (6.0)
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p> 满足上面两个设计器要求之后就可以安装 FoxBPM的 Eclipse 插件了<a href="http://pan.baidu.com/s/1dDo0gM1" target="_top">FoxBPM Eclipse Plugin 下载地址</a>
                     
                  </p>
                  
               </div>
               
            </div>
            
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="reporting.problems"></a>1.6. 报告问题
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p>可以通过GitHub平台提供的issues功能来提交问题和bug。 <a href="https://github.com/FoxBPM/FoxBPM/issues" target="_top">GtiHub issues</a>. 
               </p>
               
            </div>
            
         </div>
         
         <div lang="">
            <div class="titlepage">
               <div>
                  <div>
                     <h1 class="title"><a name="GettingStarted"></a>第 2 章 快速入门
                     </h1>
                  </div>
               </div>
            </div>
            
            
            
            <div>
               <div class="titlepage"></div>
               
               <p>本章节适合所有读者，不过在快速入门之前需要用户有一定的基础能力，起码要知道JDK的环境变量的配置。
                  用户首先需要下载FoxBPM完成整版设计器、FoxBPM6.0Release包，支持的运行环境为JDK 5+、Tomcat 6.0，
                  FoxBPM暂时支持的数据库有mysql、oracle、sqlserver，用户可以选择其中的任意一种进行数据库环境的搭建。
                  通过本章节用户可以获取并部署好FoxBPM的Web服务，设计简单报销流程，并能在web上正确运行。
                  通过本章节用户将会了解简单的流程设计和发布，用户若想和应用系统进行集成还需要对其他章节或文档进行学习。
               </p>
               
            </div> 
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d5e59"></a>2.2. Web环境部署
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e61"></a>2.2.1. 部署介绍
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>这里只介绍FoxBPM项目的部署，对于其他系统怎么集成FoxBPM这里不做介绍，用户可以参照集成相关文档。</p>
                  
                  <p> 首先介绍一下FoxBPM项目，这是一个采用spring框架构建的简单web示例，集成了流程引擎。其功能
                     包括流程定义的查询展示、流程定义启动、待办任务的查询、任务执行、历史任务查询、流程图展示、流程追踪、基于日历面板进行任务展示等。 
                  </p>
                  
                  <p> 用户在基于FoxBPM流程引擎构建自己的系统时，可以参照这个示例对流程引擎相关API的调用。用户也可以基于这个项目构建自己的流程管控中心。 </p>
                  
               </div>
               
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="database_config"></a>2.2.2. 数据库配置
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p> 流程引擎有自己的运行时仓库，所以在部署项目之前首先需要将数据脚本导入到本地数据库。打开FoxBPMRelease/database目录，选择适合自己的数据库脚本，在对应工具里执行。
                     默认脚本会向AU_USERINFO表插入一条数据用来进行系统登录，用户名为“admin”，密码为“1” 
                  </p>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="environment_config"></a>2.2.3. 环境配置
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>
                     FoxBPM引擎支持JDK1.5以上开发环境，相关信息可以参照“项目介绍”文档，这里以apache-tomcat-6.0.39\jdk1.6.0_43为环境，保证tomcat正常启动即可。
                     
                  </p>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="deploy_config"></a>2.2.4. 部署
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>
                     将FoxBPMRelease\wars\foxbpm.war部署包拷贝至apache-tomcat-6.0.39\webapps目录下，然后启动tomcat服务，webapps目录下会自动生成FoxBPM文件夹。
                     停止服务进入foxbpm\WEB-INF\classes\conf目录，打开jdbc.properties文件修改数据库相关配置，
                     包括数据URL、数据库用户名、密码，然后再次启动服务即可。 
                  </p>
                  
                  <p> 为了验证是否启动部署成功，打开浏览器，输入URL “http://localhost:8080/foxbpm/”。 </p>
                  
                  <p> 如果进入系统登录页面则说明部署成功 </p>
                  <div align="center"><img width="&#xA;              800&#xA;             " src="images/login.jpg" align="middle"></div>
                  <p>
                     
                  </p>
                  
                  <p> 输入用户名“admin”、密码“1”，点击登录进入系统。 </p>
                  
                  <p> 默认进入个人面页面如下图所示，系统相关操作用户可以参照 “Foxbpm Web 功能”文档 </p>
                  <div align="center"><img width="&#xA;              800&#xA;             " src="images/dashboard.jpg" align="middle"></div>
                  <p>
                     
                  </p>
                  
               </div>
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d5e85"></a>2.3. 设计器配置
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <div>
                  <ol type="1">
                     <li>
                        
                        <p>打开windows-&gt;preferences-&gt;流程设计器配置,为设计器配置rest服务地址，此目的是为了同步项目中用到的所有资源。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.22.png" align="middle"></div>
                        
                        <p> 服务地址：此地址需要根据自己项目web.xml中配置的rest服务而确定，FoxBPM中rest服务前缀默认为
                           service/，所以此处写http://localhost:8080/foxbpm/service。后面发布流程和资源同步都将调用这个服务，所以要确保这个服务正确。
                        </p>
                        
                        <p> 解压路径：资源的本地路径，建议新建文件夹。</p>
                        
                     </li>
                     <li>
                        
                        <p>点击设计器同步。此时会将组织机构信息同步到设计器的嵌入式仓库中、将连接器等其他资源同步至设计器本地，这样就可以开始设计流程了。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.23.png" align="middle"></div>
                        
                        <p>点击Ok完成目录创建。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.24.png" align="middle"></div>
                        
                        <p>点击Ok进行目录清空。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.25.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>点击Ok完成。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.26.png" align="middle"></div>
                        
                     </li>
                  </ol>
               </div>
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="gs.processDiagram"></a>2.4. 设计流程
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p>用例：员工报销流程，当报销金额大于500元时需要经理审批，小于500元时需要部门主管审批。</p>
               
               <div>
                  <ol type="1">
                     <li>
                        
                        <p>新建一个Test java工程（这里主要是为创建流程文件时需要指定一个目录提供。需要注意的是最终集成到应用系统中时，流程定义的bpmn文件最好建在webapp目录下，
                           如果是建在资源目录下，发布流程定义的时候会导致服务重新启动。如果建在webapp目录下调试的时候就避免了这样的麻烦。）
                        </p>
                        
                     </li>
                     <li>
                        
                        <p>项目视图右键-&gt;New-&gt;Other-&gt;FoxBPM，选择“新建FoxBPM流程”，点击“Next”</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.1.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>选择“默认模板”，点击“Next”</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.2.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>输入路径（可以在点击预览）、编号、名称、版本（必须是数字），点击“Finish”</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.3.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>完成可以看到FoxBPM的设计界面，如图：</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.4.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>删除人工任务节点和结束节点之间的线，从画板上拖两个活动/人工任务和一个排他网关到设计界面上，</p>
                        
                        <p>用连接/顺序流连接起来各个节点 做成如下图样子。</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.5.png" align="middle"></div>
                        
                        <div style="margin-left: 0.5in; margin-right: 0.5in;">
                           <h3 class="title">注意</h3>
                           
                           
                           <p>这里需要配置插件BPMN2行为属性，否则导致“结束”节点不支持多个线条指向。</p>
                           
                           <div align="center"><img width="600" src="images/processDiagram.6.png" align="middle"></div>
                           
                        </div>
                        
                     </li>
                     <li>
                        
                        <p>先改流程整体的配置信息，点击流程空白处，打开eclipse的Properties窗口，如图：</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.7.png" align="middle"></div>
                        
                        <p>点击默认主题，编辑表达式，如图：</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.8.png" align="middle"></div>
                        
                        <div style="margin-left: 0.5in; margin-right: 0.5in;">
                           <h3 class="title">注意</h3>
                           
                           
                           <p>这里操作表单项不用配置（FoxBPM的Web做了特殊处理，会直接走web提供的默认表单，如果想自己提供表单请继续看我们的 表单集成文档）</p>
                           
                        </div>
                        
                     </li>
                     <li>
                        
                        <p>因为需求中需要判断报销金额的大小，所以我们创建一个流程变量amount,类型为整型：</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.9.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>下面选中第一个节点“人工任务”(提交申请)属性-&gt;任务命令，配置操作表单。</p>
                        
                        <p>添加一个启动并提交按钮，最终效果如图</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.10.png" align="middle"></div>
                        
                        <div align="center"><img width="600" src="images/processDiagram.11.png" align="middle"></div>
                        
                        <div align="center"><img width="600" src="images/processDiagram.19.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>然后我们配置网关之后的线条条件，选中线条(指向经理审批)，打开Properties属性框，设置表单式，这里我们可以是简单的判断语句，也可以是经过复杂运算之后用return
                           true的形式返回判断结果。简单配置如图：
                        </p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.12.png" align="middle"></div>
                        
                        <p>同样的方法我们设置网关后面的另外一条线条条件为：amount&lt;=500</p>
                        
                     </li>
                     <li>
                        
                        <p>最后配置User_Task2和User_Task3节点的信息，即审批节点的配置，点击节点，属性-&gt;任务命令，配置操作表单。</p>
                        
                        <p>添加一个退回-上一步按钮，改名称为拒绝，最终效果如图：</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.13.png" align="middle"></div>
                        
                        <p>下面配置任务分配，这一步可以暂时什么都不做，用FoxBPM默认配置所有人。</p>
                        
                     </li>
                     <li>
                        
                        <p>点击“保存”。到这里，第一个报销流程基本上就结束了。</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.20.png" align="middle"></div>
                        
                     </li>
                  </ol>
               </div>
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d5e198"></a>2.5. 发布流程
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <div>
                  <ol type="1">
                     <li>
                        
                        <p>在发布之前要确保tomcat是运行中状态，在Eclipse的Project Explorer视图中，右击流程定义的bpmn文件，选择“流程操作”，在弹出的发布对话框中进行发布操作，如下图所示。</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.15.png" align="middle"></div>
                        
                        <p>在流程发布界面点击发布按钮</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.16.png" align="middle"></div>
                        
                        <p>出现流程发布结果提示框，点击OK按钮</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.17.png" align="middle"></div>
                        
                        <p>在流程发布界面上出现以下记录及流程发布成功，点击确定按钮</p>
                        
                        <div align="center"><img width="600" src="images/processDiagram.18.png" align="middle"></div>
                        
                     </li>
                  </ol>
               </div>
               
               
            </div>
            
            
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d5e218"></a>2.6. web运行
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <div>
                  <ol type="1">
                     <li>
                        
                        <p>访问http://127.0.0.1:8080/foxbpm/login.html。</p>
                        
                        <div align="center"><img width="600" src="images/login.jpg" align="middle"></div>
                        
                        <p>输入账号：admin 初始密码：1，点击登录</p>
                        
                     </li>
                     <li>
                        
                        <p>登录成功，进入发起流程页面</p>
                        
                        <div align="center"><img width="600" src="images/webRun.2.png" align="middle"></div>
                        
                        <div align="center"><img width="600" src="images/webRun.3.png" align="middle"></div>
                        
                        <div align="center"><img width="600" src="images/webRun.4.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>进入待办任务页面</p>
                        
                        <div align="center"><img width="600" src="images/webRun.5.png" align="middle"></div>
                        
                        <p>点击表单接收任务</p>
                        
                        <div align="center"><img width="600" src="images/webRun.6.png" align="middle"></div>
                        
                        <p>再次点击表单处理任务</p>
                        
                        <div align="center"><img width="600" src="images/webRun.7.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>查看已办办任务</p>
                        
                        <div align="center"><img width="600" src="images/webRun.8.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>查看流程追踪</p>
                        
                        <div align="center"><img width="600" src="images/webRun.9.png" align="middle"></div>
                        
                        <p>点击查看</p>
                        
                        <div align="center"><img width="600" src="images/webRun.10.png" align="middle"></div>
                        
                        <p>点击流程图</p>
                        
                        <div align="center"><img width="600" src="images/webRun.11.png" align="middle"></div>
                        
                        <div style="margin-left: 0.5in; margin-right: 0.5in;">
                           <h3 class="title">说明</h3>
                           
                           
                           <p>流程详细页面中可以查看流程的整个运行过程以及能在图直观展现流程执行过程。</p>
                           
                        </div>
                        
                     </li>
                  </ol>
               </div>
               
               <p>至此整个“员工报销流程”运行完成。</p>
               
            </div>
            
         </div>
         
         <div lang="">
            <div class="titlepage">
               <div>
                  <div>
                     <h1 class="title"><a name="GetCode"></a>第 3 章 代码获取及Web环境配置
                     </h1>
                  </div>
               </div>
            </div>
            
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="gc.getFoxBPM"></a>3.1. 获取FoxBPM
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p>请确保在阅读本章前，在github网站注册了账号，或者已经了下载FoxBPM6.0 release包，里面包含所有项目源码。Release包用户可以省过此步骤，直接到maven环境配置小节。</p>
               
               <div>
                  <ol type="1">
                     <li>
                        
                        <p>打开eclipse,然后在工程空白区域，右键选择import-&gt;import-&gt;Git-&gt;Projects from git
                           ，点击“Next”。
                        </p>
                        
                        <div align="center"><img width="600" src="images/gettingStarted.1.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>在弹出的界面选择URI，点击“Next”，弹出如下界面：</p>
                        
                        <div align="center"><img width="600" src="images/gettingStarted.2.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>访问github.com网站，登陆，搜索FoxBPM,回车，如图：</p>
                        
                        <div align="center"><img width="600" src="images/gettingStarted.3.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>搜索到FoxBPM相关项目，点击FoxBPM/FoxBPM 进入。</p>
                        
                        <div align="center"><img width="600" src="images/gettingStarted.7.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>点击右边https clone url的copy按钮，复制FoxBPM的git地址。</p>
                        
                        <div align="center"><img width="600" src="images/gettingStarted.4.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>返回eclipse，粘贴如图</p>
                        
                        <div align="center"><img width="600" src="images/gettingStarted.5.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>输入注册的git账号密码信息，选择store in Secure store(记住密码)，点击“Next”，</p>
                        
                        <p>此时会出现FoxBPM代码的分支信息，如下图。全部选择，点击“Next”。</p>
                        
                        <div align="center"><img width="600" src="images/gettingStarted.6.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>选择GIT的工作目录，假设在E:\GIT_DEMO\FoxBPM（此目录后面会用到）,选择master分支，点击“Next”。</p>
                        
                        <div align="center"><img width="600" src="images/gettingStarted.9.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>此时会从github下载代码，需要等待几分钟，完成后如下图，直接点击“Cancel”。</p>
                        
                        <div align="center"><img width="600" src="images/gettingStarted.10.png" align="middle"></div>
                        
                     </li>
                  </ol>
               </div>
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="gc.mavenConfig"></a>3.2. Maven环境配置
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <div>
                  <ol type="1">
                     <li>
                        
                        <p> 下载maven,下载地址： <a href="http://maven.apache.org/download.html" target="_top">http://maven.apache.org/download.html</a>
                           
                        </p>
                        
                     </li>
                     <li>
                        
                        <p> 解压缩apache-maven-3.1.1-bin.zip 到你想安装的位置，如D:/。 </p>
                        
                     </li>
                     <li>
                        
                        <p> 设置Maven系统环境变量，M2_HOME=D:/apache-maven-3.1.1。 </p>
                        
                     </li>
                     <li>
                        
                        <p> 添加Maven bin目录至系统环境变量PATH中， %MAVEN_HOME%\bin。 </p>
                        
                     </li>
                     <li>
                        
                        <p> 确认Maven的安装：cmd &gt; mvn -version。 </p>
                        
                        <div align="center"><img width="600" src="images/gs.mavenConfig.1.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>设置下workspace的编码方式，FoxBPM使用UTF-8的编码方式。
                           打开eclispse工具，点击window-&gt;preferences-&gt;General-&gt;workspace-&gt;Text file encoding
                           把编码方式改为UTF-8即可。
                        </p>
                        
                     </li>
                     <li>
                        
                        <p>
                           设置maven本地资源库。如：设置MAVEN_HOME\conf\setting.xml中设置localRepository节点值：D:\mavenRepository。
                        </p>
                        
                        <div align="center"><img width="600" src="images/gs.mavenConfig.2.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>点击window-&gt;preferences-&gt;Maven-&gt;User setting
                           选择MAVEN_HOME\conf\setting.xml，保存。
                        </p>
                        
                        <div align="center"><img width="600" src="images/gs.mavenConfig.3.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>打开E:\GIT_DEMO\FoxBPM文件夹，在命令行依次执行文本中的安装代码（修改文件路径），安装ojdbc(如果使用mysql那么不用支持下面安装)。</p>
                        <pre class="prettyprint">mvn install:install-file -DgroupId=com.oracle.jdbc -DartifactId=ojdbc5 -Dversion=11.2.0.1.0 -Dpackaging=jar -Dfile=D:\FoxBPM\MavenInstall\ojdbc5.jar </pre>
                        </li>
                     <li>
                        
                        <p>然后在工程空白区域，右键选择import-&gt;import-&gt;Maven-&gt;Existing Maven Projects ，点击“Next”</p>
                        
                     </li>
                     <li>
                        
                        <p>选择上面选择的git地址，如：E:\GIT_DEMO\FoxBPM，此时如果maven配置的本地资源库中无文件的话，maven会自动从中央仓库下载文件，（时间因网速而异），所以要保持机器联网（下载一次，以后就很快了）。之后点击finish,等待项目构建即可。</p>
                        
                        <div align="center"><img width="600" src="images/gs.mavenConfig.8.png" align="middle"></div>
                        
                     </li>
                  </ol>
               </div>
               
               <p>注：此时项目中可能很多JSP的错误，看着不舒服的可以去validation里将JSP相关的验证去掉即可。</p>
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="gc.webConfig"></a>3.3. Web环境配置
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p> 进行此节之前，请确保eclipse中已经有FoxBPM各项目代码 </p>
               
               <div>
                  <ol type="1">
                     <li>
                        
                        <p>我们还是以tomcat为例来介绍如何部署FoxBPM的maven项目</p>
                        
                        <p>调出服务器视图 window--&gt;show View--&gt;Server 新建一个服务器，本例我们选择apache tomcat
                           V6.0作为测试服务器。
                        </p>
                        
                        <div align="center"><img width="600" src="images/gettingStarted.13.png" align="middle"></div>
                        
                        <p>配置tomcat， 点击finish。</p>
                        
                        <div align="center"><img width="600" src="images/gettingStarted.14.png" align="middle"></div>
                        
                        <p>点击next将服务发布到tomcat目录下，此处只需将foxbpm-webapps-common项目发布，因为m2Eclipse插件会自动将所需web进行合并。</p>
                        
                        <div align="center"><img width="600" src="images/gettingStarted.15.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>此时应该已经发布成功。</p>
                        
                        <div align="center"><img width="600" src="images/gettingStarted.151.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>修改foxbpm-webapps-common/src/main/resource/conf/jdbc.properties文件中的数据库信息，启动tomcat就能跟上面war包部署一样正常访问web了。</p>
                        
                     </li>
                  </ol>
               </div>
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="gc.jarConfig"></a>3.4. 依赖Jar配置
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p> FoxBPM依赖以下jar文件：
                  
               </p><pre class="prettyprint"><span class="hl-comment">&lt;!-- logging --&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.slf4j<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>slf4j-api<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>1.7.6<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.slf4j<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>slf4j-log4j12<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>1.7.6<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>log4j<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>log4j<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>1.2.12<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
 <span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.foxbpm<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>foxbpm-kernel<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>6.0.1-SNAPSHOT<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.foxbpm<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>foxbpm-bpmn-converter<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>6.0.1-SNAPSHOT<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.quartz-scheduler<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>quartz<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>2.1.7<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.codehaus.groovy<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>groovy-all<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>2.1.9<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>javax.mail<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>mail<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>1.4.1<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>jakarta-regexp<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>jakarta-regexp<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>1.4<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		
		<span class="hl-tag">&lt;dependency&gt;</span>
           <span class="hl-tag">&lt;groupId&gt;</span>org.codehaus.jackson<span class="hl-tag">&lt;/groupId&gt;</span>
           <span class="hl-tag">&lt;artifactId&gt;</span>jackson-mapper-asl<span class="hl-tag">&lt;/artifactId&gt;</span>
           <span class="hl-tag">&lt;version&gt;</span>1.9.4<span class="hl-tag">&lt;/version&gt;</span>
    	<span class="hl-tag">&lt;/dependency&gt;</span>
     	<span class="hl-tag">&lt;dependency&gt;</span>
		    <span class="hl-tag">&lt;groupId&gt;</span>com.sun.xml.bind<span class="hl-tag">&lt;/groupId&gt;</span>
		    <span class="hl-tag">&lt;artifactId&gt;</span>jaxb-impl<span class="hl-tag">&lt;/artifactId&gt;</span>
		    <span class="hl-tag">&lt;version&gt;</span>2.0<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>dom4j<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>dom4j<span class="hl-tag">&lt;/artifactId&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.mybatis<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>mybatis<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>3.1.1<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>commons-dbcp<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>commons-dbcp<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>1.4<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>commons-pool<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>commons-pool<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>1.3<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>mysql<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>mysql-connector-java<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>5.0.5<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>com.oracle.jdbc<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>ojdbc5<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>11.2.0.1.0<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.springframework<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>spring-beans<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>3.2.5.RELEASE<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.springframework<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>spring-jdbc<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>3.2.3.RELEASE<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.springframework<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>spring-context<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>3.2.5.RELEASE<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.springframework<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>spring-aop<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>3.2.5.RELEASE<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.springframework<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>spring-aspects<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>3.2.5.RELEASE<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>com.sun.xml.bind<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>jaxb-core<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>2.1.14<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>javax.xml.bind<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>jaxb-api<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>2.0<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span> 

		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.springframework<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>spring-test<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>3.2.5.RELEASE<span class="hl-tag">&lt;/version&gt;</span>
			<span class="hl-tag">&lt;scope&gt;</span>test<span class="hl-tag">&lt;/scope&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.apache.xmlgraphics<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>batik-parser<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>${batik.version}<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-comment">&lt;!-- svg 相关jar --&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.apache.xmlgraphics<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>batik-transcoder<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>${batik.version}<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.apache.xmlgraphics<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>batik-bridge<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>${batik.version}<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.apache.xmlgraphics<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>batik-codec<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>${batik.version}<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.apache.xmlgraphics<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>batik-css<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>${batik.version}<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.apache.xmlgraphics<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>batik-svg-dom<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>${batik.version}<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-tag">&lt;dependency&gt;</span>
			<span class="hl-tag">&lt;groupId&gt;</span>org.apache.xmlgraphics<span class="hl-tag">&lt;/groupId&gt;</span>
			<span class="hl-tag">&lt;artifactId&gt;</span>batik-svggen<span class="hl-tag">&lt;/artifactId&gt;</span>
			<span class="hl-tag">&lt;version&gt;</span>${batik.version}<span class="hl-tag">&lt;/version&gt;</span>
		<span class="hl-tag">&lt;/dependency&gt;</span>
		<span class="hl-comment">&lt;!-- end svg 相关jar --&gt;</span>
     </pre><p>
                  
               </p>
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="gc.runFoxBPM"></a>3.5. 运行FoxBPM
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p> 进行这步之前，请确保完成<a href="#gc.webConfig" title="3.3. Web环境配置">web环境配置</a>和<a href="#">数据库脚本安装</a>。 
               </p>
               
               <p>修改\foxbpm-webapps-common\src\main\resources\conf\jdbc.properties文件,这里以oracle数据库为例。</p>
               
               <div align="center"><img width="600" src="images/gettingStarted.17.png" align="middle"></div>
               
               <p>保存，重新发布，启动tomcat服务器，发现已经启动成功。</p>
               
               <div align="center"><img width="600" src="images/gettingStarted.18.png" align="middle"></div>
               
               <p>访问http://127.0.0.1:8080/foxbpm-webapps-common/login.html</p>
               
               <div align="center"><img width="600" src="images/login.jpg" align="middle"></div>
               
               <p>输入账号：admin 初始密码：1，点击登录，登录成功，进入个人页面心界面</p>
               
               <div align="center"><img width="600" src="images/dashboard.jpg" align="middle"></div>
               
               <p>至此，快速入门结束。关于FoxBPM的其他详细信息，请继续看我们的文档。</p>
               
            </div>
            
         </div>
         
         
         <div lang="">
            <div class="titlepage">
               <div>
                  <div>
                     <h1 class="title"><a name="bpmn_chapter"></a>第 4 章 BPMN2.0节点元素
                     </h1>
                  </div>
               </div>
            </div>
            
            
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="bpmn.info"></a>4.1. BPMN简介
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p><span><strong>介绍:</strong></span></p>
               
               <p>
                  业务流程建模标记法（BPMN, Business Process Modeling Notation）是对象管理组织（OMG, Object Management Group）维护的关于业务流程建模的行业性标准。
                  它创建在与UML的活动图非常相似的流程图法（flowcharting）基础上，为“业务流程图”（BPD, Business Process Diagram）中的特定业务流程提供一套图形化标记法。类似德国数学家卡尔·A·佩特里发明的Petri网。
                  
               </p>
               
               <p> <span><strong>目标:</strong></span></p>
               
               <p>
                  BPMN的目标是，通过提供一套既符合业务人员直观又能表现复杂流程语义的标记法，同时为技术人员和业务人员从事业务流程管理提供支持。
                  BPMN的首要目的是提供全体业务相关者易于理解的标准标记法。业务相关者包括创造与梳理流程的业务分析师、负责实施流程的技术开发者、以及管理和监督流程的经理人。BPMN旨在充当公共语言，跨越业务流程设计和实施之间常见的鸿沟。
                  当前有多种竞争的业务流程建模语言标准供建模过程和工具选用。广泛采用BPMN将有助于统一基本的业务流程概念的表达（例如：公共或私有的流程、编排），就像一些高级的业务概念一样（例如：例外处理、事务补偿）。
                  
               </p>
               
               <p> <span><strong>BPMN2.0元素图</strong></span></p>
               
               <p>
                  <a href="images/BPMN2_0_Poster_EN_big.png" target="_top">查看完整图片</a>
                  
               </p>
               <div align="center"><img width="800" src="images/BPMN2_0_Poster_EN.png" align="middle"></div>
               <p>
                  
               </p>
               
               
               <p> <span><strong>我们使用BPMN元素进行建模，BPMN的元素分为五个类别</strong></span></p>
               
               <p>
                  
               </p>
               <div align="center"><img width="800" src="images/bpmn.info.1.png" align="middle"></div>
               <p>
                  
               </p>
               
               <p>
                  
               </p>
               <div>
                  <ul style="list-style-type: disc; ">
                     <li>
                        
                        <p>
                           <span><strong>流对象</strong></span>: 流对象是定义业务流程的主要图形元素。它进一步细分为三个类别,分别是事件、活动和网关。
                           
                        </p>
                        
                     </li>
                     <li>
                        
                        <p>
                           <span><strong>数据</strong></span>: 它分为四个类别:数据对象、数据输入、数据输出和数据存储。
                           
                        </p>
                        
                     </li>
                     <li>
                        
                        <p>
                           <span><strong>连接对象</strong></span>: 用来把各个流对象或流对象与其他信息连接起来,它分为四种类别:顺序流(Sequence Flows)、消息流(Message Flows)、关联(Associations)和数据关联(Data Associations)。
                           
                        </p>
                        
                     </li>
                     <li>
                        
                        <p>
                           <span><strong>泳道</strong></span>: 用来区分不同部门或者不同参与者的功能和职责,泳道包含两种类别：池和道。
                           
                        </p>
                        
                     </li>
                     <li>
                        
                        <p>
                           <span><strong>人工交付物</strong></span>: 它用以给流程附加一些额外的信息,它分为两种类别：组和附注。
                           
                        </p>
                        
                     </li>
                  </ul>
               </div>
               <p>    
                  
               </p>
               
               <p>
                  <span><strong>BPMN元素的三个层次</strong></span>
                  
               </p>
               
               <p>
                  根据流程引擎的实现顺序我们将BPMN元素分为了三个层次，分别是基本元素、核心元素和高级元素，通过基本元素的学习，我们能够开始进行简单的建模；通过核心元素的学习，能够满足我们平常大部分的建模需求；通过学习高级元素，我们能够看到BPMN所能处理的复杂情况。
                  
                  
               </p>
               
               <p>
                  <span><strong>基本元素:</strong></span>
                  
               </p>
               <div align="center"><img width="800" src="images/bpmn.info.2.png" align="middle"></div>
               <p>
                  
               </p>
               
               <p>
                  <span><strong>核心元素:</strong></span>
                  
               </p>
               <div align="center"><img width="800" src="images/bpmn.info.3.png" align="middle"></div>
               <p>
                  
               </p>
               
               <p>
                  <span><strong>高级元素:</strong></span>
                  
               </p>
               <div align="center"><img width="800" src="images/bpmn.info.4.png" align="middle"></div>
               <p>
                  
               </p>
               
               <p>
                  <span><strong>BPMN的扩展元素</strong></span>
                  
               </p>
               
               <p>
                  BPMN2.0是一个各个厂商公认的业务建模标准,最终用户可以不受到来自供应商的绑定,遵循这个标准的厂商之间的产品可以平滑的过度。
                  然而,BPMN2.0标准的的一个缺点就是,它始终是许多不同的公司之间的讨论和妥协的结果,对于一名开发人员来说BPMN 2.0 XML标准的定义,
                  有时感觉它的结构或做事方式有点太麻烦了,并且很多工作流产品必须的流转配置信息,在标准里边没有很好的定义出来,所以,我们在BPMN2.0的基础之上遵循官方对BPMN2.0的扩展原则,
                  对标准做了一些自己的扩展,FoxBPM引擎的扩展都以"foxbpm:"开头,包括节点扩展和属性扩展。 BPMN是个开放的标准,它为每个元素都提供了扩展的方式,extensionElements可以包含在任务BPMN官方的元素里。 
                  
               </p>
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="bpmn.process"></a>4.2. 流程定义
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p> 流程定义基于XML语法、文件后缀名为“bpmn”，可基于eclipse插件进行图形化设计。 流程定义主体主要包括两部分，分别是流程模型信息和元素节点的图形信息。
                  流程模型信息包括所有的流程元素节点定义，包括其中元素节点之间的关联关系，节点名称是“bpmn2:process”。
                  元素节点图形信息包括节点大小和坐标，节点名称是“bpmndi:BPMNDiagram”。 流程定义的主要属性包括默认主题、默认操作表单、流程启动人、数据变量、连接器。 
               </p>
               
               <p>
                  在FoxBPM引擎中,一个流程定义实际指的就是一个Process元素,FoxBPM现在并不支持多Process的交互式流程图,
                  设计完流程定义之后需要发布到数据库中才能供引擎使用,FoxBPM支持多流程版本功能,新启动的流程自动走新的版本,老的流程继续跑在老的版本上,相互不会产生影响。
                  
               </p> 
               
               <p>
                  <span><strong>XML定义</strong></span>:      
                  
               </p><pre class="prettyprint">
<span class="hl-directive">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hl-tag">&lt;bpmn2:definitions</span> <span class="hl-attribute">xmlns:xsi</span>=<span class="hl-value">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hl-attribute">xmlns</span>=<span class="hl-value">"http://www.foxbpm.org"</span> <span class="hl-attribute">xmlns:bpmn2</span>=<span class="hl-value">"http://www.omg.org/spec/BPMN/20100524/MODEL"</span> <span class="hl-attribute">xmlns:bpmndi</span>=<span class="hl-value">"http://www.omg.org/spec/BPMN/20100524/DI"</span> <span class="hl-attribute">xmlns:dc</span>=<span class="hl-value">"http://www.omg.org/spec/DD/20100524/DC"</span> <span class="hl-attribute">xmlns:di</span>=<span class="hl-value">"http://www.omg.org/spec/DD/20100524/DI"</span> <span class="hl-attribute">xmlns:foxbpm</span>=<span class="hl-value">"http://www.foxbpm.org/foxbpm"</span> <span class="hl-attribute">xmlns:xsd</span>=<span class="hl-value">"http://www.w3.org/2001/XMLSchema"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Definitions_1"</span> <span class="hl-attribute">targetNamespace</span>=<span class="hl-value">"http://www.foxbpm.org"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:process</span> <span class="hl-attribute">id</span>=<span class="hl-value">"1_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"1"</span><span class="hl-tag">&gt;</span>
    <span class="hl-tag">&lt;bpmn2:extensionElements&gt;</span>
      <span class="hl-tag">&lt;foxbpm:potentialStarter</span> <span class="hl-attribute">resourceType</span>=<span class="hl-value">"user"</span> <span class="hl-attribute">description</span>=<span class="hl-value">"所有用户都可以发起流程"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"_Expression_3"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"所有人"</span><span class="hl-tag">&gt;</span>"foxbpm_all_user"<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
      <span class="hl-tag">&lt;/foxbpm:potentialStarter&gt;</span>
      <span class="hl-tag">&lt;foxbpm:taskSubject&gt;</span>
        <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${任务主题}"</span><span class="hl-tag">&gt;</span>${任务主题}<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
      <span class="hl-tag">&lt;/foxbpm:taskSubject&gt;</span>
      <span class="hl-tag">&lt;foxbpm:formUriView&gt;</span>
        <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${浏览表单}"</span><span class="hl-tag">&gt;</span>${浏览表单}<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
      <span class="hl-tag">&lt;/foxbpm:formUriView&gt;</span>
      <span class="hl-tag">&lt;foxbpm:formUri&gt;</span>
        <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${操作表单表单}"</span><span class="hl-tag">&gt;</span>${操作表单表单}<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
      <span class="hl-tag">&lt;/foxbpm:formUri&gt;</span>
    <span class="hl-tag">&lt;/bpmn2:extensionElements&gt;</span>
    <span class="hl-tag">&lt;bpmn2:documentation</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Documentation_2"</span><span class="hl-tag">&gt;</span>测试流程<span class="hl-tag">&lt;/bpmn2:documentation&gt;</span>
    <span class="hl-tag">&lt;bpmn2:startEvent</span> <span class="hl-attribute">id</span>=<span class="hl-value">"StartEvent_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"开始"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_46<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
    <span class="hl-tag">&lt;/bpmn2:startEvent&gt;</span>
    <span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_2"</span> <span class="hl-attribute">foxbpm:taskType</span>=<span class="hl-value">"foxbpmtask"</span> <span class="hl-attribute">foxbpm:claimType</span>=<span class="hl-value">"defaultClaim"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"人工任务_4"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmn2:extensionElements&gt;</span>
        <span class="hl-tag">&lt;foxbpm:taskCommand</span> <span class="hl-attribute">id</span>=<span class="hl-value">"HandleCommand_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"接收任务"</span> <span class="hl-attribute">commandType</span>=<span class="hl-value">"claim"</span><span class="hl-tag">/&gt;</span>
        <span class="hl-tag">&lt;foxbpm:taskCommand</span> <span class="hl-attribute">id</span>=<span class="hl-value">"HandleCommand_2"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"释放任务"</span> <span class="hl-attribute">commandType</span>=<span class="hl-value">"releaseTask"</span><span class="hl-tag">/&gt;</span>
        <span class="hl-tag">&lt;foxbpm:taskCommand</span> <span class="hl-attribute">id</span>=<span class="hl-value">"HandleCommand_3"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"同意"</span> <span class="hl-attribute">commandType</span>=<span class="hl-value">"general"</span><span class="hl-tag">/&gt;</span>
        <span class="hl-tag">&lt;foxbpm:taskCommand</span> <span class="hl-attribute">id</span>=<span class="hl-value">"HandleCommand_4"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"流程状态"</span> <span class="hl-attribute">commandType</span>=<span class="hl-value">"processStatus"</span><span class="hl-tag">/&gt;</span>
      <span class="hl-tag">&lt;/bpmn2:extensionElements&gt;</span>
      <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_46<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
      <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_47<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
      <span class="hl-tag">&lt;bpmn2:potentialOwner</span> <span class="hl-attribute">id</span>=<span class="hl-value">"PotentialOwner_2"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;bpmn2:extensionElements&gt;</span>
          <span class="hl-tag">&lt;foxbpm:connectorInstanceElements</span> <span class="hl-attribute">connrctorType</span>=<span class="hl-value">"actorConnector"</span><span class="hl-tag">&gt;</span>
            <span class="hl-tag">&lt;foxbpm:connectorInstance</span> <span class="hl-attribute">connectorId</span>=<span class="hl-value">"AllUserActorConnector"</span> <span class="hl-attribute">packageName</span>=<span class="hl-value">"org.foxbpm.connector.actorconnector.AllUserActorConnector"</span> <span class="hl-attribute">className</span>=<span class="hl-value">"AllUserActorConnector"</span> <span class="hl-attribute">connectorInstanceId</span>=<span class="hl-value">"d13fa99a-db54-4231-b6f5-87d77f6fc248"</span> <span class="hl-attribute">connectorInstanceName</span>=<span class="hl-value">"所有人"</span> <span class="hl-attribute">errorHandling</span>=<span class="hl-value">""</span> <span class="hl-attribute">type</span>=<span class="hl-value">"actorconnector"</span><span class="hl-tag">/&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:connectorInstanceElements&gt;</span>
        <span class="hl-tag">&lt;/bpmn2:extensionElements&gt;</span>
      <span class="hl-tag">&lt;/bpmn2:potentialOwner&gt;</span>
    <span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>
    <span class="hl-tag">&lt;bpmn2:endEvent</span> <span class="hl-attribute">id</span>=<span class="hl-value">"EndEvent_3"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"结束_1"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_47<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
    <span class="hl-tag">&lt;/bpmn2:endEvent&gt;</span>
    <span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_46"</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"StartEvent_1"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"UserTask_2"</span><span class="hl-tag">/&gt;</span>
    <span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_47"</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"UserTask_2"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"EndEvent_3"</span><span class="hl-tag">/&gt;</span>
  <span class="hl-tag">&lt;/bpmn2:process&gt;</span>
  <span class="hl-tag">&lt;bpmndi:BPMNDiagram</span> <span class="hl-attribute">id</span>=<span class="hl-value">"BPMNDiagram_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"Default Process Diagram"</span><span class="hl-tag">&gt;</span>
    <span class="hl-tag">&lt;bpmndi:BPMNPlane</span> <span class="hl-attribute">id</span>=<span class="hl-value">"BPMNPlane_1"</span> <span class="hl-attribute">bpmnElement</span>=<span class="hl-value">"1_1"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmndi:BPMNShape</span> <span class="hl-attribute">id</span>=<span class="hl-value">"BPMNShape_StartEvent_2"</span> <span class="hl-attribute">bpmnElement</span>=<span class="hl-value">"StartEvent_1"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;dc:Bounds</span> <span class="hl-attribute">height</span>=<span class="hl-value">"36.0"</span> <span class="hl-attribute">width</span>=<span class="hl-value">"36.0"</span> <span class="hl-attribute">x</span>=<span class="hl-value">"90.0"</span> <span class="hl-attribute">y</span>=<span class="hl-value">"66.0"</span><span class="hl-tag">/&gt;</span>
      <span class="hl-tag">&lt;/bpmndi:BPMNShape&gt;</span>
      <span class="hl-tag">&lt;bpmndi:BPMNShape</span> <span class="hl-attribute">id</span>=<span class="hl-value">"BPMNShape_UserTask_2"</span> <span class="hl-attribute">bpmnElement</span>=<span class="hl-value">"UserTask_2"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;dc:Bounds</span> <span class="hl-attribute">height</span>=<span class="hl-value">"50.0"</span> <span class="hl-attribute">width</span>=<span class="hl-value">"110.0"</span> <span class="hl-attribute">x</span>=<span class="hl-value">"240.0"</span> <span class="hl-attribute">y</span>=<span class="hl-value">"90.0"</span><span class="hl-tag">/&gt;</span>
      <span class="hl-tag">&lt;/bpmndi:BPMNShape&gt;</span>
      <span class="hl-tag">&lt;bpmndi:BPMNShape</span> <span class="hl-attribute">id</span>=<span class="hl-value">"BPMNShape_EndEvent_3"</span> <span class="hl-attribute">bpmnElement</span>=<span class="hl-value">"EndEvent_3"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;dc:Bounds</span> <span class="hl-attribute">height</span>=<span class="hl-value">"36.0"</span> <span class="hl-attribute">width</span>=<span class="hl-value">"36.0"</span> <span class="hl-attribute">x</span>=<span class="hl-value">"692.0"</span> <span class="hl-attribute">y</span>=<span class="hl-value">"142.0"</span><span class="hl-tag">/&gt;</span>
      <span class="hl-tag">&lt;/bpmndi:BPMNShape&gt;</span>
      <span class="hl-tag">&lt;bpmndi:BPMNEdge</span> <span class="hl-attribute">id</span>=<span class="hl-value">"BPMNEdge_SequenceFlow_46"</span> <span class="hl-attribute">bpmnElement</span>=<span class="hl-value">"SequenceFlow_46"</span> <span class="hl-attribute">sourceElement</span>=<span class="hl-value">"BPMNShape_StartEvent_2"</span> <span class="hl-attribute">targetElement</span>=<span class="hl-value">"BPMNShape_UserTask_2"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;di:waypoint</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"dc:Point"</span> <span class="hl-attribute">x</span>=<span class="hl-value">"108.0"</span> <span class="hl-attribute">y</span>=<span class="hl-value">"102.0"</span><span class="hl-tag">/&gt;</span>
        <span class="hl-tag">&lt;di:waypoint</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"dc:Point"</span> <span class="hl-attribute">x</span>=<span class="hl-value">"108.0"</span> <span class="hl-attribute">y</span>=<span class="hl-value">"115.0"</span><span class="hl-tag">/&gt;</span>
        <span class="hl-tag">&lt;di:waypoint</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"dc:Point"</span> <span class="hl-attribute">x</span>=<span class="hl-value">"240.0"</span> <span class="hl-attribute">y</span>=<span class="hl-value">"115.0"</span><span class="hl-tag">/&gt;</span>
      <span class="hl-tag">&lt;/bpmndi:BPMNEdge&gt;</span>
      <span class="hl-tag">&lt;bpmndi:BPMNEdge</span> <span class="hl-attribute">id</span>=<span class="hl-value">"BPMNEdge_SequenceFlow_47"</span> <span class="hl-attribute">bpmnElement</span>=<span class="hl-value">"SequenceFlow_47"</span> <span class="hl-attribute">sourceElement</span>=<span class="hl-value">"BPMNShape_UserTask_2"</span> <span class="hl-attribute">targetElement</span>=<span class="hl-value">"BPMNShape_EndEvent_3"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;di:waypoint</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"dc:Point"</span> <span class="hl-attribute">x</span>=<span class="hl-value">"350.0"</span> <span class="hl-attribute">y</span>=<span class="hl-value">"115.0"</span><span class="hl-tag">/&gt;</span>
        <span class="hl-tag">&lt;di:waypoint</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"dc:Point"</span> <span class="hl-attribute">x</span>=<span class="hl-value">"710.0"</span> <span class="hl-attribute">y</span>=<span class="hl-value">"115.0"</span><span class="hl-tag">/&gt;</span>
        <span class="hl-tag">&lt;di:waypoint</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"dc:Point"</span> <span class="hl-attribute">x</span>=<span class="hl-value">"710.0"</span> <span class="hl-attribute">y</span>=<span class="hl-value">"142.0"</span><span class="hl-tag">/&gt;</span>
      <span class="hl-tag">&lt;/bpmndi:BPMNEdge&gt;</span>
    <span class="hl-tag">&lt;/bpmndi:BPMNPlane&gt;</span>
  <span class="hl-tag">&lt;/bpmndi:BPMNDiagram&gt;</span>
<span class="hl-tag">&lt;/bpmn2:definitions&gt;</span>
</pre><p>
                  
               </p>
               
               
               
               <p>
                  <span><strong>流程基本信息：</strong></span>:  
                  
               </p>
               
               <div>
                  <ul style="list-style-type: disc; ">
                     <li>
                        
                        <p>
                           <span><strong>流程编号(id)</strong></span>:也叫流程Key 用来标识一个流程,但是一个流程里会有多个版本,所以通过Key找流程,不能定位到唯一的一个。 
                           
                        </p>
                        
                     </li>
                     <li>
                        
                        <p>
                           <span><strong>流程唯一编号(dbid)</strong></span>:流程唯一编号,由流程Key、版本号、GIUD组合而成的唯一编号。   
                           
                        </p>
                        
                     </li>
                     <li>
                        
                        <p>
                           <span><strong>流程名称(name)</strong></span>:流程的名称。
                           
                        </p>
                        
                     </li>
                     <li>
                        
                        <p>
                           <span><strong>分类(category)</strong></span>:用于流程定义的归类。
                           
                        </p>
                        
                     </li>
                  </ul>
               </div>
               
               
               <p>
                  <span><strong>Java代码</strong></span>:  
                  
               </p><pre class="prettyprint">
<span class="hl-comment">//查询所有流程定义</span>
List&lt;ProcessDefinitionBehavior&gt; processDefinitions=modelService.createProcessDefinitionQuery().list();

<span class="hl-comment">//获取其中的一个流程定义</span>
ProcessDefinitionBehavior processDefinition=processDefinitions.get(<span class="hl-number">0</span>);

<span class="hl-comment">//流程唯一编号</span>
processDefinition.getProcessDefinitionId();

<span class="hl-comment">//流程编号</span>
processDefinition.getProcessDefinitionKey();

<span class="hl-comment">//流程名称</span>
processDefinition.getName();

<span class="hl-comment">//版本号</span>
processDefinition.getVersion();

<span class="hl-comment">//流程分类</span>
processDefinition.getCategory();

<span class="hl-comment">//流程定义里的所有元素</span>
processDefinition.getFlowElements();
</pre><p> 
                  
               </p>
               
               
               
               <p><a name="bpmn.process.subject"></a>
                  <span><strong>流程任务主题</strong></span>:
                  
               </p>
               
               <p>
                  流程任务主题是用来标识一个流程实例的说明,不同于人工任务(UserTask)的任务主题,流程的任务主题是用来显示在流程实例上的实例主题,一般情况下我们在流程中只需要设置这个流程任务
                  主题就可以了,一但设置了流程任务主题,流程中的所有人工任务(UserTask)的任务主题在没有配置的情况下就会默认从这里取。
                  
               </p>
               
               
               
               
               <p><a name="bpmn.process.defaultForm"></a>
                  <span><strong>默认表单</strong></span>:
                  
               </p>
               
               <p>
                  默认表单包括默认操作表单、默认浏览表单。FoxBPM引擎的一条流程记录会有一个流程实例和多个任务组成,当UserTask的操作表单没有配置的时候,会
                  自动去流程实例默认表单去寻找。当我们想查看一个流程实例的数据的时候一般都是以这个默认表单打开。
                  
               </p>
               
               
               <p><a name="bpmn.process.startUser"></a>
                  <span><strong>流程启动人</strong></span>:
                  
               </p>
               
               <p>
                  流程启动人表示可以启动该流程的用户、启动人主要起到过滤的作用，当用户登录系统后只能看到自己可以启动的流程。
                  流程启动人可以配置具体用户、也可以配置角色和部门或者所有人。如果配置的所有人，那么任何人都可以看到并且可以启动。
                  如果配置的是角色或者部门，那么只有属于该角色或者该部门的用户才可以看到和启动。
                  
               </p>
               
               
               <p><a name="bpmn.process.variable"></a>
                  <span><strong>流程数据变量</strong></span>:
                  
               </p>
               
               <p>
                  流程数据变量是指流程运行过程中会用到的变量，比如可以保存业务表单数据、也可以通过变量控制流程分散、通过变量进行加签会签控制。
                  如果任务活动不在同一个会话中，但又要传递变量值，可以选择将变量持久化。
                  FoxBPM支持常用的数据类型包括String、Integer、List等。
                  常用的业务类型为数据库变量、自定义变量等。
                  
               </p>
               
               
               <p><a name="bpmn.process.connector"></a>
                  <span><strong>流程连接器</strong></span>:
                  
               </p>
               
               <p>
                  在流程上配置的连接器，当流程启动或者结束时会触发执行。任何可以在任务活动上配置的连接器都可以配置在流程定义上。
                  
               </p>
               
               
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="bpmn.flowElement"></a>4.3. FoxBPM支持的BPMN元素
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p>
                  目前FoxBPM只提供了对BPMN标准的部分实现、包括事件、活动、网关、线条等。
                  
               </p>
               
               <p>
                  
               </p>
               <div>
                  <ul style="list-style-type: disc; ">
                     <li>
                        
                        <p> 
                           <span><strong>事件元素：</strong></span>
                           
                        </p>
                        <div align="justify"><img width="502" src="images/event.PNG" align="justify"></div>
                        <p>
                           
                        </p>
                        
                     </li>
                     <li> 
                        
                        <p>  
                           <span><strong>活动元素：</strong></span>
                           
                        </p>
                        <div align="justify"><img width="501" src="images/task.PNG" align="justify"></div>
                        <p>
                           
                        </p>
                        
                     </li>
                     <li>
                        
                        <p> 
                           <span><strong>网关元素：</strong></span>
                           
                        </p>
                        <div align="justify"><img width="498" src="images/gateway.PNG" align="justify"></div>
                        <p>
                           
                        </p>
                        
                     </li>
                     <li>
                        
                        <p> 
                           <span><strong>线条元素：</strong></span>
                           
                        </p>
                        <div align="justify"><img width="496" src="images/connector.PNG" align="justify"></div>
                        <p>
                           
                        </p>
                        
                     </li>
                     <li>
                        
                        <p> 
                           <span><strong>图形元素：</strong></span>
                           
                        </p>
                        <div align="justify"><img width="497" src="images/widget.PNG" align="justify"></div>
                        <p>
                           
                        </p>
                        
                     </li>
                  </ul>
               </div>
               <p> 
                  
               </p> 
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e552"></a>4.3.1. 事件
                           </h3>
                        </div>
                     </div>
                  </div>
                   
                  
                  <p>
                     事件是在流程过程中发生的事情。事件总是以一个圆圈图形出现。在BPMN 2.0中，存在两个主要的事件类别：捕捉(Catching)或抛出(Throwing)事件。
                     
                  </p>
                  <div>
                     <ul style="list-style-type: disc; ">
                        <li>
                           
                           <p>
                              <span><strong>捕捉(Catching)</strong></span>:  执行过程中的事件到达时，它会等待一个触发发生。是指由不同的触发器内的图标或XML中的类型声明。捕获事件在视觉上区别于图标不填（即它是白色的）由内投掷事件。
                              
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>
                              <span><strong>抛出(Throwing)</strong></span>:  执行过程中的事件到达时，触发器被触发。是指由不同的触发器内的图标或XML中的类型声明。投掷项目在视觉上区别从一个醒目的事件内的图标，用黑色填充。
                              
                           </p>
                           
                        </li>
                     </ul>
                  </div>
                  <p>
                     对一个事件来说，通常会有产生该事件的原因（起因）和该事件所产生的影响（结果），例如一个消息的到来触发了一个事件并导致流程的启动，这个开始事件的起因是消息，它被称为消息开始事件，流程在结束时发送了一个消息，这个结束事件的结果是发送了消息，它被称为消息结束事件。我们使用不同的标识来区分事件的不同起因和结果。我们也使用事件不同的起因和结果来分类事件，完整的事件类型如下图所示：
                     空开始事件没有指定事件的起因，它只是产生Token，触发流程的执行；空结束事件没有指定事件的结果，它消费掉Token，结束流程的执行。
                     
                  </p>
                  
                  <p><span><strong>FoxBPM事件支持: </strong></span></p>
                  
                  <p> 在BPMN2.0官方定义的这些事件中FoxBPM引擎现在支持：开始事件、结束事件、时间边界事件、时间捕获事件、终止事件。</p>
                  
                  <p>
                     <span><strong>BPMN2.0事件元素图:</strong></span>
                     
                  </p>
                  <div align="center"><img width="800" src="images/BPMN2_0_Poster_EN_EVENT.png" align="middle"></div>
                  <p>
                     
                  </p>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e570"></a>4.3.1.1. 开始事件
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.NoneStartEvent.Description"></a>4.3.1.1.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div> 
                         
                        
                        <p>
                           开始事件表示一个空的启动事件,表示流程的启动是人工启动的,需要通过调用FoxBPM引擎RunTimeService中的启动方法将流程发起。
                           开始事件会触发执行流程定义里面配置的连接器。
                           
                        </p>
                        
                        <p> 
                           
                        </p><pre class="prettyprint">

<span class="hl-comment">//创建一个启动命令</span>
StartProcessInstanceCommand startProcessInstanceCommand = <span class="hl-keyword">new</span> StartProcessInstanceCommand();
<span class="hl-comment">//设置需要启动的流程的KEY</span>
startProcessInstanceCommand.setProcessDefinitionKey(<span class="hl-string">"Process_StartProcessInstanceTest"</span>);
<span class="hl-comment">//设置业务关联键</span>
startProcessInstanceCommand.setBusinessKey(<span class="hl-string">"bk_StartProcessInstanceTest"</span>);
<span class="hl-comment">//设置流程的启动人</span>
startProcessInstanceCommand.setStartAuthor(<span class="hl-string">"1200119390"</span>);
<span class="hl-comment">//启动流程，返回流程实例</span>
ProcessInstance processInstance = runtimeService.noneStartProcessInstance(startProcessInstanceCommand);
</pre><p>
                           
                        </p>
                        
                        <p>
                           <span><em>注意: </em></span> 私有子流程(subprocess) 总是有一个空启动事件(None StartEvent).
                           
                        </p> 
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.NoneStartEvent.GraphicalNotation"></a>4.3.1.1.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           一个空启动事件是图形为一个圆,细边框空心圆圈的图标(即没有触发类型)。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/start_event.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.NoneStartEvent.xml"></a>4.3.1.1.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           这是一个空启动事件的XML表示,没有任何子元素(其他开始事件类型都有一个元素声明的类型)。
                           
                        </p><pre class="prettyprint">
<span class="hl-tag">&lt;bpmn2:startEvent</span> <span class="hl-attribute">id</span>=<span class="hl-value">"StartEvent_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"启动"</span><span class="hl-tag">&gt;</span></pre><p>
                           
                        </p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e589"></a>4.3.1.2. 时间开始事件
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.TimeStartEvent.Description"></a>4.3.1.2.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div> 
                         
                        
                        <p>
                           时间开始事件表示一个流程发布之后会定时启动的事件,表示流程的启动是自动启动的,不需要通过手动调用FoxBPM引擎RunTimeService中的启动方法。
                           时间开始事件也会触发执行流程定义里面配置的连接器。
                           
                        </p> 
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.TimeStartEvent.GraphicalNotation"></a>4.3.1.2.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           时间开始事件是图形为一个圆,细边框中间有时钟圆圈的图标(即有时间触发类型)。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/time_start_event.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.TimeStartEvent.xml"></a>4.3.1.2.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           时间开始事件的节点元素和开始事件的节点元素一样，只是多了一个时间事件的定义。
                           目前FoxBPM流程引擎支持两种触发类型：其一是日期时间点执行，流程发布或者更新之后流程只会自动启动一遍；其二是循环执行，在流程发布或者更新之后引擎会根据配置的时间表达式周期性执行。
                           两种触发类型的时间表达式都在时间定义元素节点里面配置，如下图所示：
                           
                        </p><pre class="prettyprint">

<span class="hl-tag">&lt;bpmn2:startEvent</span> <span class="hl-attribute">id</span>=<span class="hl-value">"StartEvent_2"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"时间启动"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmn2:timerEventDefinition</span> <span class="hl-attribute">id</span>=<span class="hl-value">"TimerEventDefinition_1"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;bpmn2:timeDate</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"bpmn2:tFormalExpression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"FormalExpression_11"</span> <span class="hl-attribute">foxbpm:name</span>=<span class="hl-value">"new Date();"</span><span class="hl-tag">&gt;</span>new Date();<span class="hl-tag">&lt;/bpmn2:timeDate&gt;</span>
      <span class="hl-tag">&lt;/bpmn2:timerEventDefinition&gt;</span>
<span class="hl-tag">&lt;/bpmn2:startEvent&gt;</span>
</pre><p>
                           
                        </p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e604"></a>4.3.1.3. 结束事件
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.NoneEndEvent.Description"></a>4.3.1.3.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div> 
                         
                        
                        <p>
                           一个空结束事件(NoneEndEvent)表示抛出的结果是不确定的。因此，流程引擎将只会结束当前执行路径(Token)。 
                           在FoxBPM引擎中,流程执行到空结束事件(NoneEndEvent)的时候,当前 令牌(Token)会被结束,如果当前令牌(Token)是根令牌(RootToken)
                           ,则整个流程实例将会被结束,否则只会结束这个分支令牌(ChildToken),流程实例结束的时候会触发实例结束事件(process-end)。
                           
                        </p>  
                        
                        <p>
                           <span><em> 需要注意的是：</em></span> 如果结束事件是触发流程实例结束那将触发执行流程定义里面配置的连接器。
                           
                        </p> 
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.NoneEndEvent.GraphicalNotation"></a>4.3.1.3.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           一个空结束事件(NoneEndEvent)是粗的空心的圆圈都成的的图标(没有事件定义)。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/end_event.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.NoneEndEvent.xml"></a>4.3.1.3.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           空结束事件(NoneEndEvent)的XML表示,没有任何子元素。
                           
                        </p><pre class="prettyprint"><span class="hl-tag">&lt;bpmn2:endEvent</span> <span class="hl-attribute">id</span>=<span class="hl-value">"EndEvent_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"结束"</span><span class="hl-tag">&gt;</span></pre><p>
                           
                        </p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e621"></a>4.3.1.4. 终止事件
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.EndEvent.Description"></a>4.3.1.4.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div> 
                         
                        
                        <p>
                           终止结束事件(Terminate End Event)表示流程走到这里的时候,不仅仅会结束当前的分支,而且还会直接结束整个流程实例,
                           不管当前走到结束的是 分支令牌(ChildToken) 还是 根令牌(RootToken) 都会直接结束整个流程实例,并触发流程实例结束事件(process-end) 
                           结束事件属于抛出(Throwing)型事件，这意味着当流程执行到结束事件时结果将被抛出。结果类型的由事件内的事件定义决定。
                           终止事件将会标识流程实例的状态时终止状态，表示非正常结束。
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.EndEvent.GraphicalNotation"></a>4.3.1.4.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           终止事件(EndEvent)是粗的实心的圆圈组成的的图标，如下图所示
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/terminate_end.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.EndEvent.xml"></a>4.3.1.4.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           终止事件(NoneEndEvent)的XML表示,终止事件的元素节点和结束事件的元素节点一样，但是多了一个终止事件定义的子元素节点，如以下代码所示：
                           
                        </p><pre class="prettyprint">
    <span class="hl-tag">&lt;bpmn2:endEvent</span> <span class="hl-attribute">id</span>=<span class="hl-value">"EndEvent_2"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"End Event 2"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_1<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
      <span class="hl-tag">&lt;bpmn2:terminateEventDefinition</span> <span class="hl-attribute">id</span>=<span class="hl-value">"TerminateEventDefinition_1"</span><span class="hl-tag">/&gt;</span>
    <span class="hl-tag">&lt;/bpmn2:endEvent&gt;</span>
              </pre><p>
                           
                        </p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e636"></a>4.3.1.5. 时间捕获事件
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.TimeCatchEvent.Description"></a>4.3.1.5.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div> 
                         
                        
                        <p>
                           时间捕获事件属于中间捕获事件，表示中间捕获事件多了一个时间定义，当流程运行到时间捕获事件节点时就会暂停住，然后在指定的时间或者一定的时间规则下恢复过来。
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.TimeCatchEvent.GraphicalNotation"></a>4.3.1.5.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           时间捕获事件(Timer_IntermediateCatchEvent)是图形为一个双层圆,细边框中间有时钟圆圈的图标(即有时间触发类型)。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/timer_catch_event.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.TimeCatchEvent.xml"></a>4.3.1.5.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           时间捕获事件的XML表示, 时间捕获事件元素节点为intermediateCatchEvent包括其子元素节点时间事件定义timerEventDefinition，时间事件定义和时间开始事件中的时间事件定义一样，如以下代码所示：
                           
                        </p><pre class="prettyprint">
     <span class="hl-tag">&lt;bpmn2:intermediateCatchEvent</span> <span class="hl-attribute">id</span>=<span class="hl-value">"IntermediateCatchEvent_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"时间捕获事件"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_3<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
      <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_4<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
      <span class="hl-tag">&lt;bpmn2:timerEventDefinition</span> <span class="hl-attribute">id</span>=<span class="hl-value">"TimerEventDefinition_2"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;bpmn2:timeDate</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"bpmn2:tFormalExpression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"FormalExpression_22"</span> <span class="hl-attribute">foxbpm:name</span>=<span class="hl-value">"new Date();"</span><span class="hl-tag">&gt;</span>new Date();<span class="hl-tag">&lt;/bpmn2:timeDate&gt;</span>
      <span class="hl-tag">&lt;/bpmn2:timerEventDefinition&gt;</span>
    <span class="hl-tag">&lt;/bpmn2:intermediateCatchEvent&gt;</span>
              </pre><p>
                           
                        </p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e651"></a>4.3.1.6. 时间边界事件
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.TimeBoundayEvent.Description"></a>4.3.1.6.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div> 
                         
                        
                        <p>
                           边界事件都是捕获事件，它会附在一个环节上。 （边界事件不可能触发事件）。这意味着，当节点运行时， 事件会监听对应的触发类型。 当事件被捕获，就会执行事件的后续连线。可以根据需要选择是否终止活动。
                           定时边界事件是指在边界事件上添加一个时间事件定义提供定时执行功能。当流程执行到绑定了边界事件的环节， 会启动一个定时器。 当定时器触发时（比如，一定时间之后）， 并沿着定时边界事件的外出连线继续执行。
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.TimeBoundaryEvent.GraphicalNotation"></a>4.3.1.6.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           时间边界事件的图标和时间捕获事件的图标一致，只不过时间边界事件必须附于一个活动节点。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/time_boundary_event.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.event.TimeBoundaryEvent.xml"></a>4.3.1.6.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           时间边界事件的XML表示, 时间边界事件元素节点为boundaryEvent包括其子元素节点时间事件定义timerEventDefinition，时间事件定义和时间开始事件中的时间事件定义一样，如以下代码所示：
                           
                        </p><pre class="prettyprint">
    <span class="hl-tag">&lt;bpmn2:boundaryEvent</span> <span class="hl-attribute">id</span>=<span class="hl-value">"BoundaryEvent_2"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">attachedToRef</span>=<span class="hl-value">"UserTask_1"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_6<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
      <span class="hl-tag">&lt;bpmn2:timerEventDefinition</span> <span class="hl-attribute">id</span>=<span class="hl-value">"TimerEventDefinition_4"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;bpmn2:timeDate</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"bpmn2:tFormalExpression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"FormalExpression_37"</span> <span class="hl-attribute">foxbpm:name</span>=<span class="hl-value">"new Date();"</span><span class="hl-tag">&gt;</span>new Date();<span class="hl-tag">&lt;/bpmn2:timeDate&gt;</span>
      <span class="hl-tag">&lt;/bpmn2:timerEventDefinition&gt;</span>
    <span class="hl-tag">&lt;/bpmn2:boundaryEvent&gt;</span>
              </pre><p>
                           
                        </p>
                        
                        <p>
                           <span><em>注意: </em></span> “boundaryEvent”元素节点必须有一个属性“attachedToRef” 以标示其所属的活动节点。
                           
                        </p> 
                        
                     </div>
                     
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e668"></a>4.3.2. 活动
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>
                     在基本活动里，我们知道活动是流程是执行过程中的工作，分为两类：任务（原子活动）和子流程（块活动）。
                     任务是流程模型中的最小工作单元，不能继续分解，子流程则能继续分解为一些列的子活动。
                     在核心元素里我们将讨论任务和子流程更加具体的类型，这样我们在建模时会有更加具体的语义。
                     所有的活动节点都支持跳过策略、多实例、执行连接器，都可以基于eclipse插件配置。
                     
                  </p> 
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e671"></a>4.3.2.1. 人工任务
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.UserTask.Description"></a>4.3.2.1.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           人工任务(UserTask)是用于模拟人工工作的，通常需要人工操作完成的，是流程定义中最常用的节点。 
                           人工任务可配置的属性包括任务名称、任务优先级、任务类型、任务主题、任务描述、任务完成后的描述、任务预计持续的时间、任务操作表单、浏览表单、任务跳过策略、任务命令、任务分配、任务连接器。
                           
                        </p>
                        
                        <p>
                           其中任务名称、任务优先级、任务类型、任务主题、任务描述、任务完成后的描述都可以在待办页面展示， 操作表单用于配置该任务对应的业务表单。
                           如果存在任务可以跳过的情况，可以给任务节点配置跳过策略。
                           任务的执行操作可以通过任务命令进行配置，目前流程支持的任务命令包括：通用、启动并提交、提交等。当然引擎支持任务命令扩展，用户可以自定义任务命令。
                           如果用户想在任务执行的时候调用一个外部服务如：短信接口、WEB服务、发送邮件等，可以通过配置任务的连接器来实现。
                           任务分配支持具体用户分配和组的分配，如果分配指定的具体用户，那么只有该用户才能获取到任务，如果是分配的组包括角色部门等，那么所属该组的用户都可以获取到该任务。
                           
                           
                        </p>
                        
                     </div>
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.UserTask.GraphicalNotation"></a>4.3.2.1.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           一个人工任务是图形为一个圆角矩形,有一个小的用户图标在左上角。如下图所示，制作标书和评阅都属于人工任务。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/user_task.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div>
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.UserTask.XMLRepresentation"></a>4.3.2.1.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                         
                        
                        <p>
                           XML元素表示如下:
                           
                        </p><pre class="prettyprint"><span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"人工任务"</span><span class="hl-tag">/&gt;</span></pre><p>
                           
                        </p> 
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.UserTask.commonConfig"></a>4.3.2.1.4. 任务基本属性
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           <span><strong>名称</strong></span>:
                           任务节点显示的名称，如果流程定义和任务节点的主题属性都没有值，引擎就会将名称设置为主题。
                           
                        </p> 
                        
                        <p>
                           <span><strong>任务类型</strong></span>:
                           为了方便用户对任务进行归类，人工任务提供任务类型属性，默认是foxbpmtask
                           
                        </p>
                        
                        <p>
                           <span><strong>操作表单</strong></span>:
                           用来进行任务处理的表单地址,可以从数据变量中的表单变量中选择,也可以返回一段字符串地址"add.html"。支持脚本表达式。
                           
                        </p>
                        
                        <p>
                           <span><strong>浏览表单</strong></span>:
                           用来在查看已经处理完毕的任务的表单。支持脚本表达式。
                           
                        </p>
                        
                        <p>
                           <span><strong>任务优先级</strong></span>:
                           用来标识任务的紧急程度,以供用户选择执行，目前引擎支持五中任务级别分别是，非常低、低、一般、高、非常高，其常量值分别是20、40、50、80、100
                           
                        </p>
                        
                        <p>
                           <span><strong>任务主题</strong></span>:
                           每个任务都有自己的任务主题、如果人工任务上该属性值为空，引擎会自动从流程定义上获取默认的任务主题。
                           如果流程定义上的默认任务主题也没有值，引擎就将任务活动的名称设置为主题。支持脚本表达式。
                           
                        </p>
                        
                        <p>
                           <span><strong>任务描述</strong></span>:
                           每个任务都有自己任务描述，描述任务的详细信息。支持脚本表达式。
                           
                        </p>
                        
                        <p>
                           <span><strong>完成后的描述</strong></span>:
                           每个任务都有完成后的描述，描述该任务完成的详细信息。支持脚本表达式。
                           
                        </p>
                        
                        <p>
                           <span><strong>任务预计持续时间</strong></span>:
                           目前只做显示用，不做超时处理。
                           
                        </p>
                        
                        <p>  
                           <span><strong>XML定义</strong></span>:
                           
                        </p><pre class="prettyprint">
              
 <span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_4"</span> <span class="hl-attribute">foxbpm:taskType</span>=<span class="hl-value">"foxbpmtask"</span> <span class="hl-attribute">foxbpm:claimType</span>=<span class="hl-value">"defaultClaim"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"人工任务_3"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmn2:extensionElements&gt;</span>
        <span class="hl-tag">&lt;foxbpm:taskPriority&gt;</span>
          <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"高"</span><span class="hl-tag">&gt;</span>80<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
        <span class="hl-tag">&lt;/foxbpm:taskPriority&gt;</span>
        <span class="hl-tag">&lt;foxbpm:expectedExecutionTime</span> <span class="hl-attribute">day</span>=<span class="hl-value">"1"</span> <span class="hl-attribute">hour</span>=<span class="hl-value">"1"</span> <span class="hl-attribute">minute</span>=<span class="hl-value">"1"</span><span class="hl-tag">/&gt;</span>
        <span class="hl-tag">&lt;foxbpm:taskSubject&gt;</span>
          <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${任务主题}"</span><span class="hl-tag">&gt;</span>${任务主题}<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
        <span class="hl-tag">&lt;/foxbpm:taskSubject&gt;</span>
        <span class="hl-tag">&lt;foxbpm:taskDescription&gt;</span>
          <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${任务描述}"</span><span class="hl-tag">&gt;</span>${任务描述}<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
        <span class="hl-tag">&lt;/foxbpm:taskDescription&gt;</span>
        <span class="hl-tag">&lt;foxbpm:completeTaskDescription&gt;</span>
          <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${完成后的描述}"</span><span class="hl-tag">&gt;</span>${完成后的描述}<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
        <span class="hl-tag">&lt;/foxbpm:completeTaskDescription&gt;</span>
        <span class="hl-tag">&lt;foxbpm:formUriView&gt;</span>
          <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${浏览表单}"</span><span class="hl-tag">&gt;</span>${浏览表单}<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
        <span class="hl-tag">&lt;/foxbpm:formUriView&gt;</span>
        <span class="hl-tag">&lt;foxbpm:formUri&gt;</span>
          <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${操作表单}"</span><span class="hl-tag">&gt;</span>${操作表单}<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
        <span class="hl-tag">&lt;/foxbpm:formUri&gt;</span>
        <span class="hl-tag">&lt;/bpmn2:extensionElements&gt;</span>
     <span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>
  </pre><p> 
                           
                        </p> 
                        
                     </div>
                     
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.UserTask.skipStratetry"></a>4.3.2.1.5. 跳过策略
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           跳过策略表明自动跳过该人工任务节点，流程进入该节点时也不会分配任务，自动跳过，流程继续往下运行。
                           用户可以选择是否生成跳过记录，如果选择生成跳过记录，引擎在跳过该任务时会生成一条已办任务。
                           
                        </p>
                        
                        <p>
                           <span><strong>XML定义</strong></span>:跳过策略、处理者、跳过意见都支持脚本表达式。
                           
                        </p><pre class="prettyprint">
              
 <span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_2"</span> <span class="hl-attribute">foxbpm:taskType</span>=<span class="hl-value">"foxbpmtask"</span> <span class="hl-attribute">foxbpm:claimType</span>=<span class="hl-value">"defaultClaim"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"人工任务_2"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmn2:extensionElements&gt;</span>
        <span class="hl-tag">&lt;foxbpm:skipStrategy</span> <span class="hl-attribute">foxbpm:isEnable</span>=<span class="hl-value">"true"</span><span class="hl-tag">&gt;</span>
          <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_14"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"true"</span><span class="hl-tag">&gt;</span>true;<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;foxbpm:skipAssignee</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:SkipAssignee"</span><span class="hl-tag">&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"&amp;quot;admin&amp;quot;"</span><span class="hl-tag">&gt;</span>${var_admin}+"admin"<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:skipAssignee&gt;</span>
          <span class="hl-tag">&lt;foxbpm:skipComment</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:SkipComment"</span><span class="hl-tag">&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"&amp;quot;good&amp;quot;"</span><span class="hl-tag">&gt;</span>${var_admin}+"good"<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:skipComment&gt;</span>
        <span class="hl-tag">&lt;/foxbpm:skipStrategy&gt;</span>
        <span class="hl-tag">&lt;foxbpm:expectedExecutionTime/&gt;</span>
      <span class="hl-tag">&lt;/bpmn2:extensionElements&gt;</span>
     <span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>
  </pre><p> 
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.UserTask.command"></a>4.3.2.1.6. 任务命令
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           任务命令可以展现于业务表单界面，是用户同流程引擎交互的接口，用户可以基于eclipse设计器进行配置。
                           任务节点生成任务之后可以通过相关接口获取每个任务的所有命令，然后在通过相关API执行任务命令。
                           
                        </p>
                        
                        <p>
                           <span><strong>XML定义</strong></span>:
                           
                        </p><pre class="prettyprint">
              
<span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_1"</span> <span class="hl-attribute">foxbpm:claimType</span>=<span class="hl-value">"defaultClaim"</span> <span class="hl-attribute">foxbpm:taskType</span>=<span class="hl-value">"foxbpmtask"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"人工任务_1"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmn2:extensionElements&gt;</span>
        <span class="hl-tag">&lt;foxbpm:connectorInstanceElements</span> <span class="hl-attribute">connrctorType</span>=<span class="hl-value">"flowConnector"</span><span class="hl-tag">/&gt;</span>
        <span class="hl-tag">&lt;foxbpm:taskCommand</span> <span class="hl-attribute">id</span>=<span class="hl-value">"HandleCommand_6"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"接收任务"</span> <span class="hl-attribute">commandType</span>=<span class="hl-value">"claim"</span><span class="hl-tag">&gt;</span>
          <span class="hl-tag">&lt;foxbpm:params</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:CommandParam"</span> <span class="hl-attribute">key</span>=<span class="hl-value">"isSaveData"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"是否保存数据"</span> <span class="hl-attribute">description</span>=<span class="hl-value">""</span> <span class="hl-attribute">bizType</span>=<span class="hl-value">"ControlParam"</span> <span class="hl-attribute">dataType</span>=<span class="hl-value">"String"</span><span class="hl-tag">&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"false"</span><span class="hl-tag">&gt;</span>CDATA[false<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:params&gt;</span>
          <span class="hl-tag">&lt;foxbpm:params</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:CommandParam"</span> <span class="hl-attribute">key</span>=<span class="hl-value">"isVerification"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"是否触发验证"</span> <span class="hl-attribute">description</span>=<span class="hl-value">""</span> <span class="hl-attribute">bizType</span>=<span class="hl-value">"ControlParam"</span> <span class="hl-attribute">dataType</span>=<span class="hl-value">"String"</span><span class="hl-tag">&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_2"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"false"</span><span class="hl-tag">&gt;</span>false<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:params&gt;</span>
          <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_3"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span><span class="hl-tag">&gt;</span><span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
        <span class="hl-tag">&lt;/foxbpm:taskCommand&gt;</span>
        <span class="hl-tag">&lt;foxbpm:taskCommand</span> <span class="hl-attribute">id</span>=<span class="hl-value">"HandleCommand_2"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"释放任务"</span> <span class="hl-attribute">commandType</span>=<span class="hl-value">"releaseTask"</span><span class="hl-tag">&gt;</span>
          <span class="hl-tag">&lt;foxbpm:params</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:CommandParam"</span> <span class="hl-attribute">key</span>=<span class="hl-value">"isSaveData"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"是否保存数据"</span> <span class="hl-attribute">description</span>=<span class="hl-value">""</span> <span class="hl-attribute">bizType</span>=<span class="hl-value">"ControlParam"</span> <span class="hl-attribute">dataType</span>=<span class="hl-value">"String"</span><span class="hl-tag">&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_4"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"false"</span><span class="hl-tag">&gt;</span>false<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:params&gt;</span>
          <span class="hl-tag">&lt;foxbpm:params</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:CommandParam"</span> <span class="hl-attribute">key</span>=<span class="hl-value">"isVerification"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"是否触发验证"</span> <span class="hl-attribute">description</span>=<span class="hl-value">""</span> <span class="hl-attribute">bizType</span>=<span class="hl-value">"ControlParam"</span> <span class="hl-attribute">dataType</span>=<span class="hl-value">"String"</span><span class="hl-tag">&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_5"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"false"</span><span class="hl-tag">&gt;</span>false<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:params&gt;</span>
          <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_6"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span><span class="hl-tag">&gt;</span><span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
        <span class="hl-tag">&lt;/foxbpm:taskCommand&gt;</span>
        <span class="hl-tag">&lt;foxbpm:taskCommand</span> <span class="hl-attribute">id</span>=<span class="hl-value">"HandleCommand_3"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"启动并提交"</span> <span class="hl-attribute">commandType</span>=<span class="hl-value">"startandsubmit"</span><span class="hl-tag">&gt;</span>
          <span class="hl-tag">&lt;foxbpm:params</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:CommandParam"</span> <span class="hl-attribute">key</span>=<span class="hl-value">"isSaveData"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"是否保存数据"</span> <span class="hl-attribute">description</span>=<span class="hl-value">""</span> <span class="hl-attribute">bizType</span>=<span class="hl-value">"ControlParam"</span> <span class="hl-attribute">dataType</span>=<span class="hl-value">"String"</span><span class="hl-tag">&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_7"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"true"</span><span class="hl-tag">&gt;</span>true<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:params&gt;</span>
          <span class="hl-tag">&lt;foxbpm:params</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:CommandParam"</span> <span class="hl-attribute">key</span>=<span class="hl-value">"isVerification"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"是否触发验证"</span> <span class="hl-attribute">description</span>=<span class="hl-value">""</span> <span class="hl-attribute">bizType</span>=<span class="hl-value">"ControlParam"</span> <span class="hl-attribute">dataType</span>=<span class="hl-value">"String"</span><span class="hl-tag">&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_8"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"true"</span><span class="hl-tag">&gt;</span>true<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:params&gt;</span>
          <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_9"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span><span class="hl-tag">&gt;</span><span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
        <span class="hl-tag">&lt;/foxbpm:taskCommand&gt;</span>
        <span class="hl-tag">&lt;foxbpm:taskCommand</span> <span class="hl-attribute">id</span>=<span class="hl-value">"HandleCommand_4"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"提交"</span> <span class="hl-attribute">commandType</span>=<span class="hl-value">"submit"</span><span class="hl-tag">&gt;</span>
          <span class="hl-tag">&lt;foxbpm:params</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:CommandParam"</span> <span class="hl-attribute">key</span>=<span class="hl-value">"isSaveData"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"是否保存数据"</span> <span class="hl-attribute">description</span>=<span class="hl-value">""</span> <span class="hl-attribute">bizType</span>=<span class="hl-value">"ControlParam"</span> <span class="hl-attribute">dataType</span>=<span class="hl-value">"String"</span><span class="hl-tag">&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_10"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"true"</span><span class="hl-tag">&gt;</span>true<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:params&gt;</span>
          <span class="hl-tag">&lt;foxbpm:params</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:CommandParam"</span> <span class="hl-attribute">key</span>=<span class="hl-value">"isVerification"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"是否触发验证"</span> <span class="hl-attribute">description</span>=<span class="hl-value">""</span> <span class="hl-attribute">bizType</span>=<span class="hl-value">"ControlParam"</span> <span class="hl-attribute">dataType</span>=<span class="hl-value">"String"</span><span class="hl-tag">&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_11"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"true"</span><span class="hl-tag">&gt;</span>true<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:params&gt;</span>
          <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_12"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span><span class="hl-tag">&gt;</span><span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
        <span class="hl-tag">&lt;/foxbpm:taskCommand&gt;</span>
        <span class="hl-tag">&lt;foxbpm:taskCommand</span> <span class="hl-attribute">id</span>=<span class="hl-value">"HandleCommand_5"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"流程状态"</span> <span class="hl-attribute">commandType</span>=<span class="hl-value">"processStatus"</span><span class="hl-tag">&gt;</span>
          <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_13"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span><span class="hl-tag">&gt;</span><span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
        <span class="hl-tag">&lt;/foxbpm:taskCommand&gt;</span>
      <span class="hl-tag">&lt;/bpmn2:extensionElements&gt;</span>
     <span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>
  </pre><p> 
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.UserTask.assignment"></a>4.3.2.1.7. 任务分配
                                 </h5>
                              </div>
                           </div>
                        </div>
                         
                        
                        <p>
                           人工任务需要指派给一个用户或者是一个组(部门、角色),任务类型也被分为两大种:独占、共享，
                           独占的任务直接指派给一个用户,共享的任务可以指定给多个用户、部门、角色等,共享任务默认需要先领取才能处理。
                           
                        </p> 
                        
                        <p> 
                           下面这段XML表示,制作标书这个任务的处理者是编号为"4sgkt-71ljug-i11jy5t9-1-i11k8xgj-1e"的角色，该角色下的所有用户都可以处理该任务。 
                           
                        </p><pre class="prettyprint">
<span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_1"</span> <span class="hl-attribute">foxbpm:taskType</span>=<span class="hl-value">"foxbpmtask"</span> <span class="hl-attribute">foxbpm:claimType</span>=<span class="hl-value">"defaultClaim"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"制作标书"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmn2:potentialOwner</span> <span class="hl-attribute">id</span>=<span class="hl-value">"PotentialOwner_1"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;bpmn2:extensionElements&gt;</span>
          <span class="hl-tag">&lt;foxbpm:connectorInstanceElements</span> <span class="hl-attribute">connrctorType</span>=<span class="hl-value">"actorConnector"</span><span class="hl-tag">&gt;</span>
            <span class="hl-tag">&lt;foxbpm:connectorInstance</span> <span class="hl-attribute">connectorId</span>=<span class="hl-value">"SelectRole"</span> <span class="hl-attribute">packageName</span>=<span class="hl-value">"org.foxbpm.connector.actorconnector.SelectRole"</span> <span class="hl-attribute">className</span>=<span class="hl-value">"SelectRole"</span> <span class="hl-attribute">connectorInstanceId</span>=<span class="hl-value">"c2dd146b-a260-441e-96c8-442a35422dbd"</span> <span class="hl-attribute">connectorInstanceName</span>=<span class="hl-value">"招标公司"</span> <span class="hl-attribute">errorHandling</span>=<span class="hl-value">""</span> <span class="hl-attribute">type</span>=<span class="hl-value">"actorconnector"</span><span class="hl-tag">&gt;</span>
              <span class="hl-tag">&lt;foxbpm:connectorParameterInputs</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:ConnectorParameterInput"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"roleId"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"角色ID"</span> <span class="hl-attribute">dataType</span>=<span class="hl-value">"java.lang.String"</span> <span class="hl-attribute">isExecute</span>=<span class="hl-value">"true"</span><span class="hl-tag">&gt;</span>
                <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_7"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"&amp;quot;4sgkt-71ljug-i11jy5t9-1-i11k8xgj-1e&amp;quot;"</span><span class="hl-tag">&gt;</span>"4sgkt-71ljug-i11jy5t9-1-i11k8xgj-1e"<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
              <span class="hl-tag">&lt;/foxbpm:connectorParameterInputs&gt;</span>
              <span class="hl-tag">&lt;foxbpm:documentation</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Documentation"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Documentation_9"</span><span class="hl-tag">&gt;</span><span class="hl-tag">&lt;/foxbpm:documentation&gt;</span>
            <span class="hl-tag">&lt;/foxbpm:connectorInstance&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:connectorInstanceElements&gt;</span>
        <span class="hl-tag">&lt;/bpmn2:extensionElements&gt;</span>
      <span class="hl-tag">&lt;/bpmn2:potentialOwner&gt;</span>
<span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>
</pre><p>
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.UserTask.advancedProperties"></a>4.3.2.1.8. 高级属性
                                 </h5>
                              </div>
                           </div>
                        </div>
                         
                        
                        <p>
                           高级属性中的多实例,是用来完成一个for循环的动作,出发多次不同参数的执行,并将结果收集起来。BPMN官方对多实例是使用Multi-instance元素,来实现的,
                           一个多实例活动(multi-instance activity)是一种被定义为一个特定的步骤重复完成一些操作。
                           在编程的概念里,这个多实例相当于一个for循环,每次将输入数据集(loopDataInputCollection)中的集合遍历出来,
                           放置到输入项编号(inputDataItem)所指定的变量中,这样在这个活动(activity)中变可以使用这个输入项编号,
                           每次循环中,我们可以对输出项编号(outputDataItem)里边所指定的变量赋值,引擎会自动将这次循环中对输出项编号变量赋的值插入到输出数据集(loopDataOutputCollection)在每次循环完成的时候,
                           会触发完成表达式(completionCondition),用来判断是否够能离开这个节点。
                           
                           
                        </p>
                        
                        <p><span><em>注意</em></span>: 用于人工任务(UserTask)来说,多实例一般就是用来完成并行会签功能,也可以作用在子流程等其他节点上起到不同的效果。
                        </p>
                        
                        <p><span><em>注意</em></span>: 串行的多实例,在这个版本的FoxBPM中并没有实现,我们将会在今后的版本中引入这个功能。
                        </p>
                        
                        <p>
                           
                        </p>
                        <div>
                           <ul style="list-style-type: disc; ">
                              <li>
                                 
                                 <p><span><strong>输入数据集(loopDataInputCollection)</strong></span>: 
                                    用来设置并行数的来源,接收类型:List&lt;String&gt; 、"人员ID1,人员ID2,人员ID3"、List&lt;Object&gt;、String[],例如: 在并行的人工任务中,集合可以用:"人员ID1,人员ID2,人员ID3"。
                                    
                                 </p>
                                 
                              </li>
                              <li>
                                 <p><span><strong>输入项编号(inputDataItem)</strong></span>: 
                                    每个并行的分支都会将自己从输入数据集中获得到的一个变量放置在输入数据项中,在节点内部的配置中便可以使用这个输入项,例如 在并行的人工任务中,处理者可以使用 ${输入数据项变量}。
                                    
                                 </p>
                              </li>
                              <li>
                                 <p><span><strong>输出项编号(outputDataItem)</strong></span>: 
                                    并行的每次执行中将执行的一些数据放到输出数据集中,在这个分支结束的时候输出数据集里边的变量就会被add到输出数据集中持久化存储。
                                 </p>
                              </li>
                              <li>
                                 <p><span><strong>输出数据集(loopDataOutputCollection)</strong></span>: 
                                    用来记录每次并行执行的结果,类型是个List集合。
                                    
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p>
                           
                        </p>
                        
                        <p>
                           <span><strong>XML定义</strong></span>:
                           
                        </p><pre class="prettyprint">
              
<span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_1"</span> <span class="hl-attribute">foxbpm:claimType</span>=<span class="hl-value">"defaultClaim"</span> <span class="hl-attribute">foxbpm:taskType</span>=<span class="hl-value">"foxbpmtask"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"人工任务_1"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmn2:multiInstanceLoopCharacteristics</span> <span class="hl-attribute">id</span>=<span class="hl-value">"MultiInstanceLoopCharacteristics_1"</span><span class="hl-tag">&gt;</span>
        <span class="hl-tag">&lt;bpmn2:extensionElements&gt;</span>
          <span class="hl-tag">&lt;foxbpm:loopDataInputCollection&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_20"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${处理人集合}"</span><span class="hl-tag">&gt;</span>${处理人集合}<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:loopDataInputCollection&gt;</span>
          <span class="hl-tag">&lt;foxbpm:loopDataOutputCollection&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_21"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${处理结果集合}"</span><span class="hl-tag">&gt;</span>${处理结果集合}<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:loopDataOutputCollection&gt;</span>
        <span class="hl-tag">&lt;/bpmn2:extensionElements&gt;</span>
        <span class="hl-tag">&lt;bpmn2:inputDataItem</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"bpmn2:tDataInput"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"DataInput_2"</span><span class="hl-tag">&gt;</span>
          <span class="hl-tag">&lt;bpmn2:extensionElements&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_22"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${单个处理人}"</span><span class="hl-tag">&gt;</span>${单个处理人}<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/bpmn2:extensionElements&gt;</span>
        <span class="hl-tag">&lt;/bpmn2:inputDataItem&gt;</span>
        <span class="hl-tag">&lt;bpmn2:outputDataItem</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"bpmn2:tDataOutput"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"DataOutput_2"</span><span class="hl-tag">&gt;</span>
          <span class="hl-tag">&lt;bpmn2:extensionElements&gt;</span>
            <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_23"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${单个处理结果}"</span><span class="hl-tag">&gt;</span>${单个处理结果}<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
          <span class="hl-tag">&lt;/bpmn2:extensionElements&gt;</span>
        <span class="hl-tag">&lt;/bpmn2:outputDataItem&gt;</span>
        <span class="hl-tag">&lt;bpmn2:completionCondition</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"bpmn2:tFormalExpression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"FormalExpression_18"</span> <span class="hl-attribute">foxbpm:name</span>=<span class="hl-value">"完成条件"</span><span class="hl-tag">&gt;</span>if(${处理结果集合}.size() == ${处理人集合}.size()){return true;}return false;<span class="hl-tag">&lt;/bpmn2:completionCondition&gt;</span>
      <span class="hl-tag">&lt;/bpmn2:multiInstanceLoopCharacteristics&gt;</span>
<span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>
  </pre><p> 
                           
                        </p>
                        
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.UserTask.connector"></a>4.3.2.1.9. 任务连接器
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           目前FoxBPM流程引擎是通过连接器的方式的和外部系统交互的。比如邮件、WEB服务、短信接口等。
                           eclipse插件可以进行视图化的配置，可以控制连接器的触发机制，比如是在任务节点进入的时候执行、任务分配的时候执行、任务节点离开的时候执行、连接器的定时执行等。
                           
                        </p>
                        
                        <p>
                           <span><strong>XML定义</strong></span>:
                           
                        </p><pre class="prettyprint">
              
<span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_1"</span> <span class="hl-attribute">foxbpm:claimType</span>=<span class="hl-value">"defaultClaim"</span> <span class="hl-attribute">foxbpm:taskType</span>=<span class="hl-value">"foxbpmtask"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"人工任务_1"</span><span class="hl-tag">&gt;</span>
      <span class="hl-tag">&lt;bpmn2:extensionElements&gt;</span>
        <span class="hl-tag">&lt;foxbpm:connectorInstanceElements</span> <span class="hl-attribute">connrctorType</span>=<span class="hl-value">"flowConnector"</span><span class="hl-tag">&gt;</span>
          <span class="hl-tag">&lt;foxbpm:connectorInstance</span> <span class="hl-attribute">connectorId</span>=<span class="hl-value">"RunGroovyExpression"</span> <span class="hl-attribute">packageName</span>=<span class="hl-value">"org.foxbpm.connector.flowconnector.RunGroovyExpression"</span> <span class="hl-attribute">className</span>=<span class="hl-value">"RunGroovyExpression"</span> <span class="hl-attribute">connectorInstanceId</span>=<span class="hl-value">"2671e54d-9ecf-436a-b4f6-82d73c85731a"</span> <span class="hl-attribute">connectorInstanceName</span>=<span class="hl-value">"Junit连接器测试"</span> <span class="hl-attribute">eventType</span>=<span class="hl-value">"node-enter"</span> <span class="hl-attribute">errorHandling</span>=<span class="hl-value">"抛出异常"</span> <span class="hl-attribute">errorCode</span>=<span class="hl-value">""</span> <span class="hl-attribute">isTimeExecute</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">type</span>=<span class="hl-value">"flowconnector"</span><span class="hl-tag">&gt;</span>
            <span class="hl-tag">&lt;foxbpm:documentation</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Documentation"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Documentation_1"</span><span class="hl-tag">&gt;</span>Junit连接器测试<span class="hl-tag">&lt;/foxbpm:documentation&gt;</span>
            <span class="hl-tag">&lt;foxbpm:connectorParameterInputs</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:ConnectorParameterInput"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"expressionText"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"脚本表达式"</span> <span class="hl-attribute">dataType</span>=<span class="hl-value">"java.lang.String"</span> <span class="hl-attribute">isExecute</span>=<span class="hl-value">"false"</span><span class="hl-tag">&gt;</span>
              <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"import org.foxbpm.engine.test.api.scheduler.ConnectorTimeExecuteTest;ConnectorTimeExecuteTest.validateValue = &amp;quot;true&amp;quot;;"</span><span class="hl-tag">&gt;</span>import org.foxbpm.engine.test.api.scheduler.quartz.ConnectorTimeExecuteTest;ConnectorTimeExecuteTest.validateValue = "true";<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
            <span class="hl-tag">&lt;/foxbpm:connectorParameterInputs&gt;</span>
            <span class="hl-tag">&lt;foxbpm:connectorParameterOutputs</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:ConnectorParameterOutput"</span> <span class="hl-attribute">variableTarget</span>=<span class="hl-value">""</span> <span class="hl-attribute">output</span>=<span class="hl-value">"outputObj"</span><span class="hl-tag">/&gt;</span>
            <span class="hl-tag">&lt;foxbpm:connectorParameterOutputsDef</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:ConnectorParameterOutputDef"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"outputObj"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"返回结果"</span> <span class="hl-attribute">dataType</span>=<span class="hl-value">"java.lang.Object"</span><span class="hl-tag">/&gt;</span>
            <span class="hl-tag">&lt;foxbpm:timeExpression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:timeExpression"</span><span class="hl-tag">&gt;</span>
              <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"_Expression_2"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"timerexp"</span><span class="hl-tag">&gt;</span>import java.util.Calendar; Calendar calendar = Calendar.getInstance(); calendar.set(Calendar.SECOND, calendar.get(Calendar.SECOND) + 10); calendar.getTime();<span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
            <span class="hl-tag">&lt;/foxbpm:timeExpression&gt;</span>
            <span class="hl-tag">&lt;foxbpm:timeSkipExpression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:timeSkipExpression"</span><span class="hl-tag">&gt;</span>
              <span class="hl-tag">&lt;foxbpm:expression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"foxbpm:Expression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"Expression_2"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span><span class="hl-tag">&gt;</span><span class="hl-tag">&lt;/foxbpm:expression&gt;</span>
            <span class="hl-tag">&lt;/foxbpm:timeSkipExpression&gt;</span>
          <span class="hl-tag">&lt;/foxbpm:connectorInstance&gt;</span>
        <span class="hl-tag">&lt;/foxbpm:connectorInstanceElements&gt;</span>
      <span class="hl-tag">&lt;/bpmn2:extensionElements&gt;</span>
<span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>
  </pre><p> 
                           
                        </p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e757"></a>4.3.2.2. 子流程
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <p>
                        bpmn 2.0区分了普通子流程， 也叫做内嵌子流程，和调用节点(外部子流程)，看起来很相似。 上概念上讲，当流程抵达节点时，两者都会调用子流程。 
                        不同点是调用节点引用流程定义外部的一个流程，子流程 会内嵌到原始的流程定义中。使用调用节点的主要场景是需要重用流程定义， 这个流程定义需要被很多其他流程定义调用的时候。 
                        当流程执行到调用节点，会创建一个新分支，它是到达调用节点的流程的分支。 这个分支会用来执行子流程，默认创建并行子流程，就像一个普通的流程。 上级流程会等待子流程完成，然后才会继续向下执行。 
                        
                     </p>
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="d5e760"></a>4.3.2.2.1. 公有子流程
                                 </h5>
                              </div>
                           </div>
                        </div>
                         
                        
                        <p> 
                           使用调用节点的主要场景是需要重用流程定义， 这个流程定义需要被很多其他流程定义调用的时候。 
                           共有子流程是外部流程，主流程通过子流程编号和版本进行启动，同时可以传递业务关联键和映射主流程数据变量。 
                           当流程执行到调用节点，会创建一个新分支，它是到达调用节点的流程的分支。 这个分支会用来执行子流程，默认创建并行子流程，就像一个普通的流程。 上级流程会等待子流程完成，然后才会继续向下执行。 
                           共有子流程可以选择是否是异步调用，如果是选择为异步调用则创建子流程完毕后直接执行离开事件，子流程和主流程都独立运行。
                           
                        </p>
                        
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/callActivity.PNG" align="middle"></div>
                        
                     </div>
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="d5e766"></a>4.3.2.2.2. 私有子流程
                                 </h5>
                              </div>
                           </div>
                        </div>
                         
                        
                        <p>
                           私有子流程定义在父流程里，可以展开显示它所包含的模型细节，也可以收起隐藏细节。
                           私有子流程可以将一部分节点步骤作为一个整体，进行多实例，跳过策略，连接器的配置，并可以折叠隐藏关键业务步骤。
                           需要注意的是私有子流程属于主流程，所以主流程上配置的数据变量，对于私有子流程来说也是共享的。
                           
                        </p>
                        
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/subProcess.PNG" align="middle"></div>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e772"></a>4.3.2.3. 发送任务
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.SendTask.Description"></a>4.3.2.3.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           发送任务(SendTask)用来发送邮件、短信、通知等等消息,FoxBPM使用连接器来完成这个节点的功能。
                           发送任务中一般使用发送邮件的连接器。
                           
                        </p>
                        
                     </div>
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.SendTask.GraphicalNotation"></a>4.3.2.3.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           发送任务是图形为一个圆角矩形,有一个小的黑色邮件图标在左上角。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/sendTask.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div> 
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.SendTask.XMLRepresentation"></a>4.3.2.3.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                         
                        
                        <p>
                           XML元素表示如下:
                           
                        </p><pre class="prettyprint"><span class="hl-tag">&lt;bpmn2:sendTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SendTask_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"SendTask"</span><span class="hl-tag">/&gt;</span></pre><p>
                           
                        </p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e787"></a>4.3.2.4. 脚本任务
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ScriptTask.Description"></a>4.3.2.4.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           脚本任务(ScriptTask)是一个自动的活动，不需要用户手动执行，当一个流程执行到脚本任务的时候相应的脚本被会被执行，而不是像人工任务那样进行分配任务。但是脚本任务属于活动节点所以支持跳过策略、多实例、执行连接器。
                           对应的脚本语言用户可以基于eclipse插件进行编写。 
                           
                        </p>
                        
                     </div>
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ScriptTask.GraphicalNotation"></a>4.3.2.4.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           脚本任务是图形为一个圆角矩形,有一个小的脚本图标在左上角。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/script_task.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div>
                     
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ScriptTask.XMLRepresentation"></a>4.3.2.4.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                         
                        
                        <p>
                           XML元素表示如下:
                           
                        </p><pre class="prettyprint">
<span class="hl-tag">&lt;bpmn2:scriptTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"ScriptTask_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"ScriptTask"</span> <span class="hl-attribute">scriptFormat</span>=<span class="hl-value">"Groovy"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:script&gt;</span>System.out.print("测试脚本");<span class="hl-tag">&lt;/bpmn2:script&gt;</span>
<span class="hl-tag">&lt;/bpmn2:scriptTask&gt;</span>
</pre><p>
                           
                        </p>
                        
                        <p>
                           FoxBPM暂时支持只Groovy，开发人员也可以扩展自己的脚本语言,这里我们推荐使用Groovy做为默认的脚本引擎,关于Groovy请查看<a href="http://groovy.codehaus.org" target="_top">Groovy官网</a>
                           
                        </p> 
                        
                        
                     </div>
                     
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e804"></a>4.3.2.5. 规则任务
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.BusinessRuleTask.Description"></a>4.3.2.5.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           业务规则任务(BusinessRuleTask)用来执行一段业务规则脚本,这个节点FoxBPM引擎是采用连接器的方式去执行的。
                           
                        </p>
                        
                     </div>
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.BusinessRuleTask.GraphicalNotation"></a>4.3.2.5.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           服务任务是图形为一个圆角矩形,有一个小的表格图标在左上角。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/businessrule_task.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div>
                     
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.BusinessRuleTask.XMLRepresentation"></a>4.3.2.5.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                         
                        
                        <p>
                           XML元素表示如下:
                           
                        </p><pre class="prettyprint"><span class="hl-tag">&lt;bpmn2:businessRuleTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"BusinessRuleTask_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"BusinessRuleTask"</span><span class="hl-tag">/&gt;</span></pre><p>
                           
                        </p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e819"></a>4.3.2.6. 接收任务
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <p></p>
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ReceiveTask.Description"></a>4.3.2.6.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           接收任务(ReceiveTask)当流程走到这个节点的时候,令牌(Token)会暂停在这个节点等待一个命令来激活它。
                           一般这个节点,运用在流程走到某个步骤之后停止,等待别人事情完成之后,接到通知,再继续进行下去的功能。
                           
                        </p>
                        
                     </div>
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ReceiveTask.GraphicalNotation"></a>4.3.2.6.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           发送任务是图形为一个圆角矩形,有一个小的白色邮件图标在左上角。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/ReceiveTask.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div>
                     
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ReceiveTask.XMLRepresentation"></a>4.3.2.6.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        
                        <p>
                           XML元素表示如下:
                           
                        </p><pre class="prettyprint"><span class="hl-tag">&lt;bpmn2:receiveTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"ReceiveTask_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"ReceiveTask"</span><span class="hl-tag">/&gt;</span></pre><p>
                           
                        </p>
                        
                     </div>
                     
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e835"></a>4.3.2.7. 服务任务
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ServiceTask.Description"></a>4.3.2.7.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           BPMN官方定义,服务任务(ServiceTask)专门被用来调用服务用的,FoxBPM将这里指的服务解释为连接器,服务任务可以通过连接器完成调用功能，也可以用来和SOA框架集成。
                           服务可以Web服务、也可以是自动化的应用程序
                           
                        </p>
                        
                     </div>
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ServiceTask.GraphicalNotation"></a>4.3.2.7.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           服务任务是图形为一个圆角矩形,有一个小的齿轮图标在左上角。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/service_task.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div>
                     
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ServiceTask.XMLRepresentation"></a>4.3.2.7.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                         
                        
                        <p>
                           XML元素表示如下:
                           
                        </p><pre class="prettyprint"><span class="hl-tag">&lt;bpmn2:serviceTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"ServiceTask_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"ServiceTask"</span><span class="hl-tag">/&gt;</span></pre><p>
                           
                        </p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e850"></a>4.3.2.8. 手工任务
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ManualTask.Description"></a>4.3.2.8.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           手工任务(ManualTask)这个节点,用于描述线下完成的工作,在FoxBPM引擎遇到这个节点会直接忽略过去,这个节点只具有图形的含义。
                           
                        </p>
                        
                     </div>
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ManualTask.GraphicalNotation"></a>4.3.2.8.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           发送任务是图形为一个圆角矩形,有一个手的图标在左上角。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/manualTask.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div>
                     
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ManualTask.XMLRepresentation"></a>4.3.2.8.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                         
                        
                        <p>
                           XML元素表示如下:
                           
                        </p><pre class="prettyprint"><span class="hl-tag">&lt;bpmn2:manualTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"ManualTask_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"ManualTask"</span><span class="hl-tag">/&gt;</span></pre><p>
                           
                        </p>
                        
                     </div>
                     
                  </div> 
                  
               </div>
               
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e865"></a>4.3.3. 网关
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>
                     　　网关是用来控制流程分支执行的(令牌的分支执行)。网关能够合并或分散令牌。网关是图形为一个菱形,内部为一个图标。这个图标显示了网关的类型。
                     
                  </p>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e868"></a>4.3.3.1. 包容网关
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.InclusiveGateway.Description"></a>4.3.3.1.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           包容网关(InclusiveGateway)更像是排他网关和并行网关的结合,它会验证后面的每条顺序流,如果后面有多条顺序流条件都满足则产生并发,如只有一个
                           满足,则令牌正常往下流转不产生分支,如没有一条顺序流满足则抛出异常。
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.InclusiveGateway.GraphicalNotation"></a>4.3.3.1.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           包容网关(ExclusiveGateway)图形为一个菱形里边有一个"o"圆圈。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/inclusive_gateway.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.InclusiveGateway.XMLRepresentation"></a>4.3.3.1.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        
                        <p>
                           XML元素表示如下:
                           
                        </p><pre class="prettyprint"><span class="hl-tag">&lt;bpmn2:inclusiveGateway</span> <span class="hl-attribute">id</span>=<span class="hl-value">"InclusiveGateway_1"</span><span class="hl-tag">&gt;</span><span class="hl-tag">&lt;/bpmn2:inclusiveGateway&gt;</span></pre><p>
                           
                        </p>
                        
                        
                        <p>
                           下面是一个使用包容网关和平行网关例子的XML表示:
                           
                        </p><pre class="prettyprint">
<span class="hl-tag">&lt;bpmn2:inclusiveGateway</span> <span class="hl-attribute">id</span>=<span class="hl-value">"InclusiveGateway_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_32<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_26<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_27<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
<span class="hl-tag">&lt;/bpmn2:inclusiveGateway&gt;</span>

<span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_16"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"UserTask_2"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_26<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_28<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
<span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>

<span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_17"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"UserTask_3"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_27<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_29<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
<span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>

<span class="hl-tag">&lt;bpmn2:parallelGateway</span> <span class="hl-attribute">id</span>=<span class="hl-value">"ParallelGateway_5"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">gatewayDirection</span>=<span class="hl-value">"Converging"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_28<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
  <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_29<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_31<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
<span class="hl-tag">&lt;/bpmn2:parallelGateway&gt;</span>

<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_26"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${金额&gt;300}"</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"InclusiveGateway_1"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"UserTask_16"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:conditionExpression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"bpmn2:tFormalExpression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"${金额&gt;300}"</span><span class="hl-tag">&gt;</span>${金额&gt;300}<span class="hl-tag">&lt;/bpmn2:conditionExpression&gt;</span>
<span class="hl-tag">&lt;/bpmn2:sequenceFlow&gt;</span>

<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_27"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${金额&gt;400}"</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"InclusiveGateway_1"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"UserTask_17"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:conditionExpression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"bpmn2:tFormalExpression"</span> <span class="hl-attribute">id</span>=<span class="hl-value">"${金额&gt;400}"</span><span class="hl-tag">&gt;</span>${金额&gt;400}<span class="hl-tag">&lt;/bpmn2:conditionExpression&gt;</span>
<span class="hl-tag">&lt;/bpmn2:sequenceFlow&gt;</span>
    
<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_28"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"UserTask_16"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"ParallelGateway_5"</span><span class="hl-tag">/&gt;</span>

<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_29"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"UserTask_17"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"ParallelGateway_5"</span><span class="hl-tag">/&gt;</span>

<span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_19"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"UserTask_1"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_32<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
<span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>

<span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_20"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"UserTask_4"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_31<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
<span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>

<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_31"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"ParallelGateway_5"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"UserTask_20"</span><span class="hl-tag">/&gt;</span>

<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_32"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"UserTask_19"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"InclusiveGateway_1"</span><span class="hl-tag">/&gt;</span></pre><p>
                           
                        </p>
                        
                        <p>
                           上面的例子使用包容网关和并行网关来完成操作,当包容网关后面有多个分支的时候,并行网关负责合并,如果包容网关后面没有产生并发的话,那么并行网关将忽略不记。
                           
                        </p>
                        
                        
                        <p>
                           <span><em>注意: </em></span> 所有非网关的FlowNode节点,后面都默认实现了包容网关的功能,FoxBPM允许开发人员不使用网关来控制顺序流走向,但这样做是不推荐的,除非万不得已。
                           
                        </p>
                        
                        <p>
                           下面这样做法FoxBPM引擎是支持的,但是不推荐这么用。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/connect_condition.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e892"></a>4.3.3.2. 排他网关
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ExclusiveGateway.Description"></a>4.3.3.2.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           排他网关(ExclusiveGateway)在分裂时，只会选择一个输出顺序流传递Token,会按照后面线条的排序号优先计算,第一个满足条件的会将Token传递过去,排他网关在聚合时，任何一个输入顺序流传入Token，网关都会向后传递，不会对Token进行同步。我们使用"x"在网关内部标示出这是一个排他网关，默认情况下，我们也可以忽略标示。
                           
                        </p>
                        
                        <p>
                           一般情况下,只允许后面有一条线通过或者说是只允许有一个条件满足的时候使用排他网关。
                           
                        </p>
                        
                        <p>
                           <span><em>注意: </em></span> 当排他网关(ExclusiveGateway)后面的线条都不满足的时候会抛出异常.
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ExclusiveGateway.GraphicalNotation"></a>4.3.3.2.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           排他网关(ExclusiveGateway)图形为一个菱形里边有一个X。注意,一个网关如果内部是空的则默认为排他网关。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/ExclusiveGateway.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ExclusiveGateway.XMLRepresentation"></a>4.3.3.2.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>下面描述的是一个排他网关,后面通过带条件的顺序流<a href="#bpmn.SequenceFlow.Description" title="4.3.4.1.1. 描述">(Conditional SequenceFlow)</a>连接了三个Task。
                        </p>
                        
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/bpmn.ExclusiveGateway.XMLRepresentation.1.png" align="middle"></div>
                        
                        
                        <p> XML元素表示如下: </p><pre class="prettyprint"><span class="hl-tag">&lt;bpmn2:exclusiveGateway</span> <span class="hl-attribute">id</span>=<span class="hl-value">"ExclusiveGateway_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_6<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_3<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_4<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_5<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
<span class="hl-tag">&lt;/bpmn2:exclusiveGateway&gt;</span>
<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_3"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${金额}==500"</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"ExclusiveGateway_1"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"Task_1"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:conditionExpression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"bpmn2:tFormalExpression"</span><span class="hl-tag">&gt;</span>${金额}==500<span class="hl-tag">&lt;/bpmn2:conditionExpression&gt;</span>
<span class="hl-tag">&lt;/bpmn2:sequenceFlow&gt;</span>
<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_4"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${金额}==1000"</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"ExclusiveGateway_1"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"Task_2"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:conditionExpression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"bpmn2:tFormalExpression"</span><span class="hl-tag">&gt;</span>${金额}==1000<span class="hl-tag">&lt;/bpmn2:conditionExpression&gt;</span>
<span class="hl-tag">&lt;/bpmn2:sequenceFlow&gt;</span>
<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_5"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"${金额}==200"</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"ExclusiveGateway_1"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"Task_3"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:conditionExpression</span> <span class="hl-attribute">xsi:type</span>=<span class="hl-value">"bpmn2:tFormalExpression"</span><span class="hl-tag">&gt;</span>${金额}==200<span class="hl-tag">&lt;/bpmn2:conditionExpression&gt;</span>
<span class="hl-tag">&lt;/bpmn2:sequenceFlow&gt;</span></pre><p>
                           
                        </p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e915"></a>4.3.3.3. 并行网关
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ParallelGateway.Description"></a>4.3.3.3.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           并行网关(ParallelGateway)用于将流程产生多个并行的分支,也可以将多个并行的分支合并回一个主线。
                           
                        </p>
                        <div>
                           <ul style="list-style-type: disc; ">
                              <li>
                                 
                                 <p>
                                    <span><strong>分散</strong></span>(Diverging):  
                                    当并行网关处于分散(Diverging)状态的时候,流程令牌(token)经过的时候,会被分散出和网关输出顺序流相同数据量的分支,并每个分支沿着对应的顺序流向下执行。
                                    
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>
                                    <span><strong>合并</strong></span>(Converging): 
                                    当并行网关处于合并(Converging)状态的时候,当分支令牌经过的时候,分支令牌会停留在网关上,等待其他的分支一起走到该网关,然后合并为一个继续向下。
                                    
                                 </p>
                                 
                              </li>
                           </ul>
                        </div>
                        <p>
                           
                        </p>
                        
                        <p>
                           分散、合并原理解释: 令牌 token1 走到 ParallelGateway1(Diverging) 的时候,token1会生成两个子令牌 token1.1 和 token1.2,两个子令牌沿着顺序流向下面的节点运行,token1父令牌
                           停留在ParallelGateway1上面,当token1.1到达 ParallelGateway2(Converging) 的时候,会停在上面等待 它的"兄弟" token1.2,当token1.2到达ParallelGateway2(Converging)的时候,
                           两个子令牌都被结束,同时激活父令牌token1,将token1拉到ParallelGateway2,沿着后面的线条向下运行。
                           
                        </p>
                        
                        <p>
                           <span><em>注意: </em></span> 并行网关处于分散的时候,会忽略掉后面顺序流的条件,直接向下执行,这是并行网关和包容网关最大的区别。
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ParallelGateway.GraphicalNotation"></a>4.3.3.3.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           并行网关(ParallelGateway)图形为一个菱形里边有一个"+"。
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/ParallelGateway.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.ParallelGateway.XMLRepresentation"></a>4.3.3.3.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           XML元素表示如下:
                           
                        </p><pre class="prettyprint"> <span class="hl-tag">&lt;bpmn2:parallelGateway</span> <span class="hl-attribute">id</span>=<span class="hl-value">"ParallelGateway_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span><span class="hl-tag">&gt;</span><span class="hl-tag">&lt;/bpmn2:parallelGateway&gt;</span></pre><p>
                           
                        </p>
                        
                        <p>
                           下面是一个合并、分散例子的XML表示:
                           
                        </p><pre class="prettyprint"><span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_7"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"提交"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_12<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
<span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>

<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_12"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"UserTask_7"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"ParallelGateway_1"</span><span class="hl-tag">/&gt;</span>

<span class="hl-tag">&lt;bpmn2:parallelGateway</span> <span class="hl-attribute">id</span>=<span class="hl-value">"ParallelGateway_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">gatewayDirection</span>=<span class="hl-value">"Diverging"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_12<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_1<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_2<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
<span class="hl-tag">&lt;/bpmn2:parallelGateway&gt;</span>

<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_1"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"ParallelGateway_1"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"UserTask_2"</span><span class="hl-tag">/&gt;</span>
<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_2"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"ParallelGateway_1"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"UserTask_4"</span><span class="hl-tag">/&gt;</span>

<span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_2"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"并行审批1"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_1<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_7<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
<span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>

<span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_4"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"并行审批2"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_2<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_8<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
<span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>
    
<span class="hl-tag">&lt;bpmn2:parallelGateway</span> <span class="hl-attribute">id</span>=<span class="hl-value">"ParallelGateway_2"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">gatewayDirection</span>=<span class="hl-value">"Converging"</span><span class="hl-tag">&gt;</span>
  <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_7<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
  <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_8<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
  <span class="hl-tag">&lt;bpmn2:outgoing&gt;</span>SequenceFlow_13<span class="hl-tag">&lt;/bpmn2:outgoing&gt;</span>
<span class="hl-tag">&lt;/bpmn2:parallelGateway&gt;</span>
   
<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_7"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"UserTask_2"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"ParallelGateway_2"</span><span class="hl-tag">/&gt;</span>
<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_8"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"UserTask_4"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"ParallelGateway_2"</span><span class="hl-tag">/&gt;</span>

<span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_13"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"ParallelGateway_2"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"UserTask_8"</span><span class="hl-tag">/&gt;</span>

<span class="hl-tag">&lt;bpmn2:userTask</span> <span class="hl-attribute">id</span>=<span class="hl-value">"UserTask_8"</span> <span class="hl-attribute">name</span>=<span class="hl-value">"最终审批"</span><span class="hl-tag">&gt;</span>   
  <span class="hl-tag">&lt;bpmn2:incoming&gt;</span>SequenceFlow_13<span class="hl-tag">&lt;/bpmn2:incoming&gt;</span>
<span class="hl-tag">&lt;/bpmn2:userTask&gt;</span>
          </pre><p>
                           
                        </p>
                        
                        
                        <p>
                           FoxBPM的分支和合并要遵循同时分散,同时收回的原则,一次分散出来的子令牌必须在一个合并网关上合并。例如下面的例子：
                           
                        </p> 
                        
                        <p>
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/bpmn.ParallelGateway.GraphicalNotation.1.png" align="middle"></div>
                        <p>
                           
                        </p> 
                        
                        <p>
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/bpmn.ParallelGateway.GraphicalNotation.2.png" align="middle"></div>
                        <p>
                           
                        </p> 
                        
                     </div>
                     
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e951"></a>4.3.4. 线条
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e953"></a>4.3.4.1. 顺序流
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.SequenceFlow.Description"></a>4.3.4.1.1. 描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           顺序流是流程中两个元素之间的连接，令牌通过顺序流流转到下面的节点上。
                           一个顺序流(SequenceFlow)上可以定义条件,当条件返回为true则允许通过,返回false则不允许通过。当节点后面多条线都满足条件将产生一个并发(有几条线满足则产生几个并发)。    
                           顺序流的排序号,当一个节点后面有多个顺序流的时候,会按照顺序流的排序号进行验证,越小的越先参与计算。         
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.SequenceFlow.GraphicalNotation"></a>4.3.4.1.2. 图形符号
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p> 
                           一个顺序流可视化作为一个从源元素对目标元素的箭头。箭头始终指向朝着既定目标。 
                           
                        </p>
                        <div align="center"><img width="&#xA;              800&#xA;             " src="images/sequence_flow.PNG" align="middle"></div>
                        <p>
                           
                        </p>
                        
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="bpmn.SequenceFlow.XMLRepresentation"></a>4.3.4.1.3. XML描述
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>
                           顺序流元素节点没有子元素，主要有两个属性也是关联任务活动节点、以及流程运行所需的重要的两个属性：sourceRef表示这个流从哪里来、targetRef表示这个流要到哪里去。 
                           
                        </p><pre class="prettyprint"><span class="hl-tag">&lt;bpmn2:sequenceFlow</span> <span class="hl-attribute">id</span>=<span class="hl-value">"SequenceFlow_3"</span> <span class="hl-attribute">name</span>=<span class="hl-value">""</span> <span class="hl-attribute">sourceRef</span>=<span class="hl-value">"UserTask_1"</span> <span class="hl-attribute">targetRef</span>=<span class="hl-value">"UserTask_2"</span><span class="hl-tag">/&gt;</span></pre><p>
                           
                        </p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e968"></a>4.3.4.2. 关联线
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <p>
                        关联线有两种普通关联线和数据关联线，普通关联线用于连接注释和活动节点，即为活动节点提供注释功能；数据关联线用于连接活动节点和数据输入图形数据输出图形。
                        起装饰的作用，对流程的运行没有任务影响。
                        
                     </p>
                     
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e971"></a>4.3.5. 图形元素
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>图形元素对流程而言起到装饰的作用，用来做交互式流程和布局用，不参与也不影响流程的运转。FoxBPM目前不支持交互式流程图（会在后面版本支持），所以目前Lane只是作为布局工具使用。后续版本中，泳道会参与任务的分配。</p>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e974"></a>4.3.5.1. 数据对象
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <p>用于描述任务活动的数据对象</p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e977"></a>4.3.5.2. 组
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <p>用于将流程元素进行简单的分组</p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e980"></a>4.3.5.3. 数据输入
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <p>用于注释活动节点的输入数据</p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e983"></a>4.3.5.4. 数据输出
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <p>用于注释活动节点的输出数据</p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e986"></a>4.3.5.5. 注释
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <p>主要用于流程节点元素的注释，可注释的元素包括除线条之外的大部分元素如事件、网关、活动、泳道、数据对象等等。</p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e989"></a>4.3.5.6. 泳道
                              </h4>
                           </div>
                        </div>
                     </div>
                      
                     
                     <p>属于流程元素分组的一种，可以将流程按照角色部门业务对象等进行分组，泳道可以更加清晰地展示各组之间的关系</p>
                     
                  </div>
                  
               </div>
               
            </div>
            
            
         </div>
         
         
         <div lang="">
            <div class="titlepage">
               <div>
                  <div>
                     <h1 class="title"><a name="EclipseDesigner"></a>第 5 章 Foxbpm Web 功能文档
                     </h1>
                  </div>
               </div>
            </div>
            
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d5e994"></a>5.1. foxbpm-common web功能介绍
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p>
                  
               </p>
               <div>
                  <ul style="list-style-type: disc; ">
                     <li>
                        
                        <p>个人面</p>
                        
                        <p>界面原型如下：</p>
                        
                        <div align="center"><img width="600" src="images/web.13.png" align="middle"></div>
                        
                        <p>说明：该页面作为主页面，目前只有日历面板和待办任务有效(关于日历和代码后面介绍)。</p>
                        
                     </li>
                     <li>
                        
                        <p>发起流程</p>
                        
                        <p>发起流程就是当前用户可以发起的流程（可以启动流程）。</p>
                        
                        <p>界面原型如下：</p>
                        
                        <div align="center"><img width="600" src="images/web.1.png" align="middle"></div>
                        
                        <p>功能说明：支持搜索查询、流程启动操作。</p>
                        
                        <p>点击启动按钮会弹出启动表单页面。</p>
                        
                        <div align="center"><img width="600" src="images/web.2.png" align="middle"></div>
                        
                        <p>在该表单页面上只有“流程状态”，“启动并提交“，“关闭”按钮。</p>
                        
                        <p>注意：表单上需要填写"申请日期"、"报销金额"(必须输入数字)、“报销部门”、“发票类型”、“事由”（可选）。</p>
                        
                     </li>
                     <li>
                        
                        <p>待办任务</p>
                        
                        <p>待办任务就是当前用户未处理的任务。</p>
                        
                        <p>界面原型如下：</p>
                        
                        <div align="center"><img width="600" src="images/web.3.png" align="middle"></div>
                        
                        <p>界面功能：待办任务查询、列表分页、展示列设置、操作表单(主要命令操作)、查看流程图。</p>
                        <div style="margin-left: 0.5in; margin-right: 0.5in;">
                           <h3 class="title">注意</h3>
                           
                           
                           <p>发起人必须是用户的ID（不支持用户名）。</p>
                           
                        </div>
                        
                     </li>
                     <li>
                        
                        <p>日历面板</p>
                        
                        <p>日历面板是采用日历的形式展现当前用户所有的待办任务。</p>
                        
                        <p>界面原型如下：</p>
                        
                        <div align="center"><img width="600" src="images/web.4.png" align="middle"></div>
                        
                        <p>界面功能：支持根据“任务优先级”、“任务创建或任务期限”来过滤待办任务，以支持“日历视图”的方式展现待办任务，和“待办任务”功能差不多区别就是在与展现方式上。</p>
                        
                     </li>
                     <li>
                        
                        <p>已办任务</p>
                        
                        <p>已办任务是指当前用户已经处理过的任务。</p>
                        
                        <p>界面原型如下：</p>
                        
                        <div align="center"><img width="600" src="images/web.5.png" align="middle"></div>
                        
                        <p>界面功能：待办任务查询、列表分页、展示列设置、表单查看、查看流程图。
                           
                        </p>
                        <div style="margin-left: 0.5in; margin-right: 0.5in;">
                           <h3 class="title">注意</h3>
                           
                           
                           <p>发起人必须是用户的ID（不支持用户名）。</p>
                           
                        </div>
                        <p>
                           
                        </p>
                        
                     </li>
                     <li>
                        
                        <p>流程追踪</p>
                        
                        <p>流程追踪就是当前用户参与过的且已完成的流程。</p>
                        
                        <p>界面原型如下：</p>
                        
                        <div align="center"><img width="600" src="images/web.6.png" align="middle"></div>
                        
                        <p>界面功能：流程查询、列表分页、展示列设置、表单查看、查看流程图。
                           
                        </p>
                        <div style="margin-left: 0.5in; margin-right: 0.5in;">
                           <h3 class="title">注意</h3>
                           
                           
                           <p>发起人必须是用户的ID（不支持用户名）。</p>
                           
                        </div>
                        <p>
                           
                        </p>
                        
                     </li>
                     <li>
                        
                        <p>系统设置</p>
                        
                        <p>系统设置就是提供整个页面的配置。</p>
                        
                        <p>界面原型如下：</p>
                        
                        <div align="center"><img width="600" src="images/web.7.png" align="middle"></div>
                        
                        <p>点击如下图：</p>
                        
                        <div align="center"><img width="600" src="images/web.8.png" align="middle"></div>
                        
                        <p>界面功能：支持“页面布局”、“本地缓存”(清除)、“主题切换”</p>
                        
                     </li>
                     <li>
                        
                        <p>流程详细信息</p>
                        
                        <p>流程详细就是整个流程执行的情况。</p>
                        
                        <p>界面原型如下：</p>
                        
                        <div align="center"><img width="600" src="images/web.9.png" align="middle"></div>
                        
                        <p>界面功能：支持“轨迹动态运行”、“流程图状态操作、“轨迹信息查看”等操作，“流程信息列表”、“流程状态”、“当前处理者”、“流程参入者”等查看。</p>
                        
                     </li>
                     <li>
                        
                        <p>页面功能介绍</p>
                        
                        <p>流程详细就是整个流程执行的情况。</p>
                        
                        <p>界面原型如下：</p>
                        
                        <div align="center"><img width="600" src="images/web.10.png" align="middle"></div>
                        
                        <p>界面功能：支持“全屏”、“锁定系统”、“退出系统”、“轨迹信息查看”等操作，“流程信息列表”、“流程状态”、“当前处理者”、“流程参入者”等查看。</p>
                        
                        <p>界面通知中心</p>
                        
                        <div align="center"><img width="600" src="images/web.11.png" align="middle"></div>
                        
                        <p>界面功能：目前只支持“任务通知”。</p>
                        
                        <p>“任务通知”单击列表数据可以打开表单，以及单击更多可以跳转至待办任务。</p>
                        
                        <p>工具栏：</p>
                        
                        <div align="center"><img width="600" src="images/web.12.png" align="middle"></div>
                        
                        <p>点击开发者工具可以清空缓存、暂不支持国际化、以及查找待办任务，支持全屏，左侧菜单隐藏功能。</p>
                        
                     </li>
                  </ul>
               </div>
               <p>
                  
               </p>
               
            </div>
            
         </div>
         
         
         <div lang="">
            <div class="titlepage">
               <div>
                  <div>
                     <h1 class="title"><a name="EclipseDesigner"></a>第 6 章 设计器安装手册
                     </h1>
                  </div>
               </div>
            </div>
            
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="eclipse.Installation"></a>6.1. 安装
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p>
                  
               </p>
               <div>
                  <ol type="1">
                     <li>
                        
                        <p>前置条件</p>
                        
                        <p>最新的设计器插件包、foxbpm-common.war。</p>
                        
                     </li>
                     <li>
                        
                        <p>打开Eclipse的官网，进入下载页面。地址：<a href="http://eclipse.org/downloads/" target="_top">http://eclipse.org/downloads/</a></p>
                        
                        <p>点击如图右方所示红框部分，进入Juno或Kepler版本的下载界面(下面以Kepler为例)。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.1.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>点击如图红框部分进入Kepler版本的下载界面。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.2.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>如图所示选择Kepler的Java EE版本下载。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.3.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>如图所示选择对应本机系统的版本。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.4.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>解压下载好的文件，打开Eclipse。</p>
                        
                        <p>如图所示点击右上角的帮助(Help)菜单，选择安装新软件(Install New Software)。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.5.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>如果是首次安装，需要添加Graphiti和Groovy两个个站点信息(如果已经存在（url一致）的话可以不添加)。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.6.png" align="middle"></div>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.7.png" align="middle"></div>
                        
                        <p>点击添加。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.8.png" align="middle"></div>
                        
                        <p>1：添加Graphiti站点信息(http://download.eclipse.org/graphiti/updates/0.10.2)。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.9.png" align="middle"></div>
                        
                        <p>1：添加Groovy站点信息(http://dist.springsource.org/release/GRECLIPSE/e4.3/)。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.10.png" align="middle"></div>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.11.png" align="middle"></div>
                        
                        <div style="margin-left: 0.5in; margin-right: 0.5in;">
                           <h3 class="title">注意</h3>
                           
                           
                           <p>Groovy站点地址：这里Groovy插件版本必须要和Eclipse版本一致。</p>
                           
                           <p> Groovy官网：http://groovy.codehaus.org/</p>
                           
                           <div align="center"><img width="600" src="images/eclipseDesigner.12.png" align="middle"></div>
                           
                        </div>
                        
                     </li>
                     <li>
                        
                        <p>继续点击添加，安装我们设计器插件。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.13.png" align="middle"></div>
                        
                        <p>在弹出的Add Repository窗口中填写如下：</p>
                        
                        <p>Name:可任意填写名称，如：FoxBPMDesigner</p>
                        
                        <p>Location:jar:file:/E:/org.foxbpm.bpmn.designer.feature_1.0.0.201411071144.jar!/</p>
                        <div style="margin-left: 0.5in; margin-right: 0.5in;">
                           <h3 class="title">注意</h3>
                           
                           
                           <p>这里点击Archire选择本地设计器插件包。</p>
                           
                        </div>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.14.png" align="middle"></div>
                        
                        <p>添加好之后点击确定，点击下一步。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.15.png" align="middle"></div>
                        
                        <p>显示安装信息，直接点击下一步。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.16.png" align="middle"></div>
                        
                        <p>在许可信息这点击同意并点击完成。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.17.png" align="middle"></div>
                        
                        <div style="margin-left: 0.5in; margin-right: 0.5in;">
                           <h3 class="title">注意</h3>
                           
                           
                           <p>插件安装过程中需要上网下载需要的依赖jar包可能有些缓慢，以及如果出现以下提示直接重新安装即可（网络导致超时）。</p>
                           
                           <div align="center"><img width="600" src="images/eclipseDesigner.20.png" align="middle"></div>
                           
                        </div>
                        <p>
                           如果提示如下信息直接点击同意。
                        </p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.18.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p> 安装完毕后会提示重启信息，我们选择重启。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.19.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p> 重启完成后，看到流程设置的菜单后，表示平台已经顺利安装成功。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.21.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>打开windows-preferences-流程设计器配置,为设计器配置rest服务地址，此目的是为了同步项目中用到的所有资源。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.22.png" align="middle"></div>
                        
                        <p> 服务地址：此地址需要根据自己项目web.xml中配置的rest服务而确定，foxbpm-webapps-common中rest服务前缀默认为
                           service/，所以此处写http://localhost:8080/foxbpm-webapps-common/service。
                        </p>
                        
                        <p> 解压路径：资源的本地路径，建议新建文件夹。 然后点击同步按钮，如果配置没有问题，则会提示同步成功，否则会提示相关错误信息。 </p>
                        
                        <p>说明：这里我已经部署好foxbpm-webapps-common服务，所以以上直接配置。</p>
                        
                     </li>
                     <li>
                        
                        <p>点击设计器同步。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.23.png" align="middle"></div>
                        
                        <p>点击Ok完成目录创建。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.24.png" align="middle"></div>
                        
                        <p>点击Ok进行目录清空。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.25.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>点击Ok完成。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.26.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>创建一个工程(随便创建一个工程主要是用来存放流程文件而已)，这里我创建一个java工程项目Test。</p>
                        
                        <p>选中Test项目鼠标右击New--&gt;Other--&gt;FoxBPM--&gt;新建FoxBPM流程并点击下一步。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.27.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>出现创建向导页面，使用默认模板，点击下一步。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.28.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>出现创建向导页面，填写编号、名称、版本(数字)，点击完成。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.29.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>完成后自动打开创建的流程文件,说明设计器插件已经可以正常使用。</p>
                        
                        <div align="center"><img width="600" src="images/eclipseDesigner.30.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>验证groovy表达式是否可正常使用。</p>
                        
                        <p>aa</p>
                        
                     </li>
                     <li>
                        
                        <p>说明：该设计器插件均在kepler、Juno版本的Eclipse 安装通过。</p>
                        
                     </li>
                  </ol>
               </div>
               <p>
                  
               </p>
               
            </div>
            
         </div>
         
         
         <div lang="">
            <div class="titlepage">
               <div>
                  <div>
                     <h1 class="title"><a name="d5e1264"></a>第 7 章 eclipse设计器使用手册
                     </h1>
                  </div>
               </div>
            </div>
            
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d5e1266"></a>7.1. 前言
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1268"></a>7.1.1. 先决条件
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>阅读此文档，请确保你已经做了以下几点：</p>
                  
                  <div>
                     <ol type="1">
                        <li>
                           
                           <p>根据FoxBPM设计器安装手册，安装好eclipse插件。</p>
                           
                        </li>
                        <li>
                           
                           <p>有一个包含foxbpm-rest的web服务，可以是foxbpm-rest-common.war或在自己项目中配置了foxbpm-rest的服务，参考部署文档。</p>
                           
                        </li>
                     </ol>
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1276"></a>7.1.2. 适用人群
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>本文档适用于使用FoxBPM产品的流程开发人员。有FixFlow,Activiti,JBPM等开源工作流使用经验者，或熟悉BPMN标准的人员，会比较容易看懂此文档。</p>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1279"></a>7.1.3. 文档内容
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>本文档主要介绍了FoxBPM产品的eclipse开发插件各功能的使用介绍，以及所有节点定义的属性介绍。可能会有部分的开发专业术语。</p>
                  
               </div>
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d5e1282"></a>7.2. 准备工作
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p>在进行流程设计之前，需要为设计器配置Rest服务地址，此目的是为了同步项目中用到的所有资源。</p>
               
               <div>
                  <ol type="1">
                     <li>
                        
                        <p>打开windows-&gt;preferences-&gt;流程设计器配置，配置相关属性。</p>
                        
                        <div align="center"><img width="600" src="images/designer.use.43.png" align="middle"></div>
                        
                        <div>
                           <ul style="list-style-type: disc; ">
                              <li>
                                 
                                 <p>服务地址：此地址需要根据自己项目web.xml中配置的rest服务而确定，foxbpm-webapps-common中rest服务前缀默认为service/，所以此处写http://localhost:8080/foxbpm-webapps-common/service</p>
                                 
                              </li>
                              <li>
                                 
                                 <p> 解压路径：资源的本地存放路径，建议新建文件夹。</p>
                                 
                              </li>
                              <li>
                                 
                                 <p> 连接器Menu路径：自定义连接器的菜单路径，不用自定义连接器时可不填，具体在连接器章节介绍。</p>
                                 
                              </li>
                           </ul>
                        </div>
                        
                     </li>
                     <li>
                        
                        <p>点击同步按钮，如果配置没有问题，则会提示同步成功，否则会提示相关错误信息。</p>
                        
                        <div align="center"><img width="600" src="images/designer.use.01.png" align="middle"></div>
                        
                     </li>
                  </ol>
               </div>
               
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d5e1303"></a>7.3. 新建流程
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <div>
                  <ol type="1">
                     <li>
                        
                        <p>选中一个目录，右键new File-&gt;Other-&gt;FoxBPM-&gt;新建FoxBPM流程</p>
                        
                        <div align="center"><img width="600" src="images/designer.use.47.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>选择模板，点击NEXT。</p>
                        
                        <div align="center"><img width="600" src="images/designer.use.44.png" align="middle"></div>
                        
                     </li>
                     <li>
                        
                        <p>填写流程相关信息。</p>
                        
                        <div align="center"><img width="600" src="images/designer.use.45.png" align="middle"></div>
                        
                        <div>
                           <ul style="list-style-type: disc; ">
                              <li>
                                 
                                 <p>流程编号：流程的编号（key），在引擎中会和版本（version）、guid一起组成流程定义的唯一编号。</p>
                                 
                              </li>
                              <li>
                                 
                                 <p> 流程名称：流程的中文名称。</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>流程版本：流程版本和以往版本的概念不同，新版本中，一个流程文件（**.bpmn）就是一个版本，如果想新建版本，必须从向导创建，或者从流程操作菜单中创建一个新的bpmn文件。</p>
                                 
                              </li>
                           </ul>
                        </div>
                        
                     </li>
                     <li>
                        
                        <p>点击FINISH,如果第一步中的同步没问题的话，此处应该在选中的目录下创建了新的bpmn文件和png文件。</p>
                        
                        <div align="center"><img width="600" src="images/designer.use.48.png" align="middle"></div>
                        
                     </li>
                  </ol>
               </div>
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d5e1333"></a>7.4. 设计流程图
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p></p>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1336"></a>7.4.1. 通用功能介绍
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p></p>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1339"></a>7.4.1.1. 表达式编辑器
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>点击属性后面的编辑按钮，可以打开表达式编辑器。</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.07.png" align="middle"></div>
                     
                     <p>表达式编辑器中可以编写Groovy代码，groovvy是一种类java的动态语言，完全支持java的语法，目前引擎默认用groovy作为脚本的解释器。</p>
                     
                     <p>几乎所有的能打开表达式编辑器的属性，都可以编写java脚本，只要返回对应的值即可，如果要返回字符串，需要加双引号，如"admin"等。</p>
                     
                     <p>不能打开表达式编辑器的属性，都应该直接填写字符串，不要双引号，如“流程分类”属性。</p>
                     
                     <div style="margin-left: 0.5in; margin-right: 0.5in;">
                        <h3 class="title">注意</h3>
                        
                        
                        <p>只有一个例外：高级属性-多实例-输入表达式，这里只能选择一个自定义变量，不能返回代码或其他格式。</p>
                        
                     </div>
                     
                     <p>打开表达式编辑器之后,界面如图</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.07.png" align="middle"></div>
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>组织机构</p>
                              
                              <p>这里可以搜索系统中的用户和部门角色，因为点击资源同步的时候，会将服务器上配置的组织机构信息同步到本地 </p>
                              
                              <div style="margin-left: 0.5in; margin-right: 0.5in;">
                                 <h3 class="title">注意</h3>
                                 
                                 
                                 <p>在正式环境配置用户信息的时候建议不要用select
                                    *,以免敏感信息泄露，另外FoxBPM会在以后版本中敏感信息的安全控制。
                                 </p>
                                 
                              </div>
                              
                           </li>
                           <li>
                              
                              <p>流程变量</p>
                              
                              <p>这里会显示流程中自定义或者导入的数据变量，双击即可使用。</p>
                              
                           </li>
                           <li>
                              
                              <p>常用代码</p>
                              
                              <p>这里提供了流程引擎的系统级变量、实例级变量和一些常用函数，双击即可使用。</p>
                              
                           </li>
                           <li>
                              
                              <p> 主编辑器区域</p>
                              
                              <p>这里是脚本编辑区域，因为默认是用groovy的脚本解释器，所以这里可以写所有的java语法和groovy语法。</p>
                              
                              <p>脚本应该根据属性需要的结果类型进行返回，如线条表达式，需要“return true或return false”,任务主题需要“return
                                 "string"”等。
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1372"></a>7.4.2. 流程定义
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>打开properties属性视图，点击流程图的空白处。</p>
                  
                  <div>
                     <ol type="1">
                        <li>
                           
                           <p>通用</p>
                           
                           <p>通用菜单中填写了流程定义的基本属性。</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.08.png" align="middle"></div>
                           
                           <div>
                              <ul style="list-style-type: disc; ">
                                 <li>
                                    
                                    <p>编号：流程的编号（ProcessDefinitionKey）,创建流程的时候填写，不能修改。</p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>唯一编号：流程定义的唯一编号（ProcessDefinitionId），发布流程的时候由引擎通过规则自动生成，不能修改。</p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>名称：流程的中文名称（ProcessDefinitionName），可以修改。</p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>分类：流程的分类信息，可以为空。</p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>任务主题：流程的默认主题（subject），必填项。</p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>操作表单：流程的默认操作表单（formUri），处理任务时，用户看到的界面，如果是foxbpm-webapps-common的web项目，此处可以填写"expenseSevelt"。</p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>浏览表单：流程的默认浏览（formUriView），任务处理人以外的其他人打开任务时看到的页面，可以不填，不存在默认会取默认操作表单。</p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                           
                        </li>
                        <li>
                           
                           <p>启动人</p>
                           
                           <p>这里配置了有权限启动流程的人员信息，多个配置之间为or关系。</p>
                           
                           <p>此处的配置会体现在modelService.getUserProcess(String
                              userId)接口中，不会在启动流程时做强制校验。也就是说用户可以绕过这个api取到流程流程定义，并通过api发起。
                           </p>
                           
                           <div align="center"><img width="600" src="images/designer.use.09.png" align="middle"></div>
                           
                        </li>
                        <li>
                           
                           <p>数据变量</p>
                           
                           <p>数据变量是指在流程设计中，用到的所有变量，此处的变量，可以通过导入或者手工创建的方式，导入方式需要的配置后面章节会介绍。</p>
                           
                           <p>这里创建的数据变量会在表达式编辑器中双击使用。</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.09.png" align="middle"></div>
                           
                           <div style="margin-left: 0.5in; margin-right: 0.5in;">
                              <h3 class="title">注意</h3>
                              
                              
                              <p>流程变量都是流程实例级别的变量，非持久化变量会在一次api调用完成之后被清空。持久化变量会被保存到foxbpm_run_variable表中，且对每个流程实例来讲，每个变量只会保存一份。</p>
                              
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>导入变量</p>
                           
                           <p>这里导入变量目前支持导入数据库表字段。下面介绍如何导入数据库变量。</p>
                           
                           <p>点击导入按钮</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.095.png" align="middle"></div>
                           
                           <p>显示导入页面并选择对应的编号(表名)点击导入变量按钮</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.096.png" align="middle"></div>
                           
                           <div style="margin-left: 0.5in; margin-right: 0.5in;">
                              <h3 class="title">注意</h3>
                              
                              
                              <p>这里选择的编号(数据库表名)必须是存在关联业务key的表，否则导入数据库变量无意义。</p>
                              
                              <p>一般来说这里的数据库表应该是针对业务表的。</p>
                              
                           </div>
                           
                           <p>显示导入变量页面并对应表字段并点击右箭头按钮</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.097.png" align="middle"></div>
                           
                           <p>接下来选择关联键</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.098.png" align="middle"></div>
                           
                           <div style="margin-left: 0.5in; margin-right: 0.5in;">
                              <h3 class="title">注意</h3>
                              
                              
                              <p>将关联业务key的字段作为关联键，不能用其他字段代替。</p>
                              
                           </div>
                           
                           <p>点击确定后就完成数据库变量的导入，下面显示导入成功后生成的变量</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.099.png" align="middle"></div>
                           
                           <div style="margin-left: 0.5in; margin-right: 0.5in;">
                              <h3 class="title">注意</h3>
                              
                              
                              <p>_BizName：是自动生成是用来存放数据库表名（这里对应上面的TB_EXPENSE）。</p>
                              
                              <p> _BizKeyField：用来存放关联业务key的表字段名(这里对应上面的ID)。</p>
                              
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>连接器</p>
                           
                           <p>连接器是将项目中用到的通用功能，封装成可视化的操作界面，给流程设计人员使用，如发送邮件，发送短信，调用webService等功能。</p>
                           
                           <p>连接器的创建和注册功能，会在后面章节单独介绍。</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.092.png" align="middle"></div>
                           
                           <p>添加连接器时，会根据添加的位置不同有不同的监听事件，如流程定义上有开始、结束、终止，人工任务上有进入、分配、执行、离开等，用户可以根据自己的需求确定连接器的执行时机。</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.093.png" align="middle"></div>
                           
                           <div>
                              <ul style="list-style-type: disc; ">
                                 <li>
                                    
                                    <p>事件：连接器的执行时机，不同节点有不同的事件类型可以选择。</p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>跳过策略：特殊情况下跳过此连接器的执行，表达式需返回bool类型。</p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>定时器配置：连接器的定时执行，在选择的事件上触发后创建Job,可返回cron表达式、List&lt;Trigger&gt;或Trigger类型。</p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>异常处理：暂不支持，目前异常处理方式均为阻断型，会回滚整个事务。</p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                           <p>后面的属性配置，会根据创建连接器时的设置填写不同的属性。详见连接器创建。</p>
                           
                        </li>
                     </ol>
                  </div>
                  
                  <p></p>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1470"></a>7.4.3. 活动
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>每一个活动节点都会有一些通用的属性。</p>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1473"></a>7.4.3.1. 通用属性
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="d5e1475"></a>7.4.3.1.1. 高级属性
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>此tab页主要是配置节点的多实例信息，经常用来做会签功能，会签功能会在后面章节单独介绍</p>
                        
                        <div align="center"><img width="600" src="images/designer.use.10.png" align="middle"></div>
                        
                        <div>
                           <ul style="list-style-type: disc; ">
                              <li>
                                 
                                 <p>并行：多实例并行执行。</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>串行：多实例串行执行，目前不支持。</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>输入数据集：循环对象（集合）。</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>输入项：每次循环的临时变量。</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>输出项：每条任务处理后的循环处理对象（处理结果）。</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>输出数据集：输出项的保存集合（List）。</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>完成表达式：判断多实例是否结束的表达式。</p>
                                 
                              </li>
                           </ul>
                        </div>
                        
                     </div>
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="d5e1496"></a>7.4.3.1.2. 跳过策略
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>此页中主要填写在何种情况下时，跳过此节点的执行，如：当上一步处理人和此步骤处理人相同时，跳过此节点</p>
                        
                        <div align="center"><img width="600" src="images/designer.use.11.png" align="middle"></div>
                        
                        <div>
                           <ul style="list-style-type: disc; ">
                              <li>
                                 
                                 <p>启用跳过策略：是否启用</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>生成跳过记录：是否在任务中生成一条跳过记录</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>跳过策略：跳过表达式，此表达式需返回boolean类型，为true时跳过此节点</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>处理者：当生成跳过记录时，记录上的处理者</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>处理意见：当生成跳过记录时，记录上的处理意见。</p>
                                 
                              </li>
                           </ul>
                        </div>
                        
                        <div style="margin-left: 0.5in; margin-right: 0.5in;">
                           <h3 class="title">注意</h3>
                           
                           
                           <p>生成跳过记录功能目前只能在人工任务节点使用。</p>
                           
                        </div>
                        
                     </div>
                     
                     <div>
                        <div class="titlepage">
                           <div>
                              <div>
                                 <h5 class="title"><a name="d5e1516"></a>7.4.3.1.3. 连接器
                                 </h5>
                              </div>
                           </div>
                        </div>
                        
                        
                        <p>同流程定义中的连接器，会在后面章节详细介绍</p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1519"></a>7.4.3.2. 人工任务
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ol type="1">
                           <li>
                              
                              <p>通用</p>
                              
                              <p>填写节点名称、描述信息（描述是引擎运转中无实际意义，主要是让其他人员能看懂，类似注释功能）</p>
                              
                              <div align="center"><img width="600" src="images/designer.use.12.png" align="middle"></div>
                              
                           </li>
                           <li>
                              
                              <p>任务信息</p>
                              
                              <p>此页主要填写一些任务的基础信息</p>
                              
                              <div align="center"><img width="600" src="images/designer.use.13.png" align="middle"></div>
                              
                              <div>
                                 <ul style="list-style-type: disc; ">
                                    <li>
                                       
                                       <p>优先级：任务的优先级</p>
                                       
                                    </li>
                                    <li>
                                       
                                       <p>任务类型：任务类型，用来在默认为foxbpmtask</p>
                                       
                                    </li>
                                    <li>
                                       
                                       <p>任务主题：任务处理人在待办任务中看到的任务的介绍信息，为空时默认从流程默认主题取值</p>
                                       
                                    </li>
                                    <li>
                                       
                                       <p>任务描述：</p>
                                       
                                    </li>
                                    <li>
                                       
                                       <p>完成后的任务描述：</p>
                                       
                                    </li>
                                    <li>
                                       
                                       <p>预计执行时间：这里是需要配合工作日历功能来做超时处理的。</p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                              
                           </li>
                           <li>
                              
                              <p>表单信息</p>
                              
                              <p>此页中主要配置此节点上，用户用来处理此任务或查看此任务时看到的表单信息，为空则默认从流程的对应属性取值。</p>
                              
                              <div align="center"><img width="600" src="images/designer.use.14.png" align="middle"></div>
                              
                           </li>
                           <li>
                              
                              <p>任务命令</p>
                              
                              <p>此页中主要配置用户接到此任务后，有哪些可以进行的操作。Foxbpm对常用的国内需求做了封装，形成一个个任务命令（TaskCommand）</p>
                              
                              <div align="center"><img width="600" src="images/designer.use.15.png" align="middle"></div>
                              
                              <div>
                                 <ul style="list-style-type: disc; ">
                                    <li>
                                       
                                       <p>领取方式：在foxbpm中，如果是多人共享任务，则需要配置领取方式，默认方式是跟随引擎的全局配置，自动领取是不需要接收任务，手工领取，必须要手工接收任务之后才能处理。</p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                              <p>点击“添加”,可以添加任务命令。</p>
                              
                              <div align="center"><img width="600" src="images/designer.use.16.png" align="middle"></div>
                              
                              <div>
                                 <ul style="list-style-type: disc; ">
                                    <li>
                                       
                                       <p>名称：用户看到的按钮名称</p>
                                       
                                    </li>
                                    <li>
                                       
                                       <p>类型：按钮的功能类型</p>
                                       
                                    </li>
                                    <li>
                                       
                                       <p>执行表达式：点击按钮的同时，会执行此处配置的表达式脚本，脚本中可以调用java方法或其他服务。</p>
                                       
                                    </li>
                                    <li>
                                       
                                       <p>引擎执行参数：此处的参数，需要后台指定，如：退回节点-后台指定，这样就需要将退回的目标节点号填写到这里。</p>
                                       
                                    </li>
                                    <li>
                                       
                                       <p>高级参数-界面收集参数：
                                          此参数需要前台传递给引擎，一般用于让最终用户选择的参数，如退回-指定处理者，api中需要在taskParams中指定此参数
                                       </p>
                                       
                                    </li>
                                    <li>
                                       
                                       <p>高级参数-界面控制参数：
                                          此参数，主要是给前台传递一些参数，让前台页面控制逻辑，设置后，会在getTaskCommandByTaskId(String
                                          taskId)返回的结果中以JSON的格式展现
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                              <div style="margin-left: 0.5in; margin-right: 0.5in;">
                                 <h3 class="title">注意</h3>
                                 
                                 
                                 <p>命令中凡是有界面收集参数的命令，都需要集成项目中前端支持，集成过程会在集成文档上介绍。</p>
                                 
                              </div>
                              
                              <p>配置好命令后，可以通过编辑，向上、向下等功能调整按钮的功能或展现顺序。</p>
                              
                           </li>
                           <li>
                              
                              <p>任务分配</p>
                              
                              <p>此页配置了此节点的处理人员</p>
                              
                              <p>新版本的处理人员都被封装成为了用户选择器，系统默认提供的选择器，基本上可以满足大部分的选择功能。特殊不满足的可以通过自己扩展选择器的方式实现。选择器的扩展方式会在后面章节介绍。</p>
                              
                              <div align="center"><img width="600" src="images/designer.use.17.png" align="middle"></div>
                              
                              <p>点击“添加”，可以添加系统提供的选择器。</p>
                              
                              <div align="center"><img width="600" src="images/designer.use.18.png" align="middle"></div>
                              
                              <p>系统默认提供的选择器，参数基本都支持Collection、List&lt;String&gt;、“user1,user2,user3”这三种形式，也就是说，如果是多个用户或多个部门，表达式中可以返回上面3中格式。
                                 其他选择器是否支持，需要看各选择器的开发文档。
                              </p>
                              
                           </li>
                        </ol>
                     </div>
                     
                     <p></p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1596"></a>7.4.3.3. 脚本任务
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>此节点需要配置需要执行的脚本，用来执行另外一件事情，可以进行多实例，跳过策略，连接器的配置。</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.19.png" align="middle"></div>
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>表达式：需要执行的脚本,此脚本和表达式编辑器中的脚本相同，均用groovy解释器解释，兼容标准java语法和groovy语法。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1605"></a>7.4.3.4. 内部子流程
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>在流程设计时，可以将一组功能组合起来作为一个内部子流程，整体进行多实例，跳过策略，连接器等配置。</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.20.png" align="middle"></div>
                     
                     <div style="margin-left: 0.5in; margin-right: 0.5in;">
                        <h3 class="title">注意</h3>
                        
                        
                        <p>内部子流程中，必须存在一个空的开始事件和一个空的结束事件。</p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1614"></a>7.4.3.5. 外部子流程
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>在上面的子流程中，如果这组功能比较特殊，可以供其他多个地方公用，如付款子流程，那就应该将这组功能抽象成一个外部子流程。</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.21.png" align="middle"></div>
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>子流程编号：需要调用的子流程编号，如“付款子流程”。</p>
                              
                           </li>
                           <li>
                              
                              <p>版本：需要调用的子流程版本，必填。</p>
                              
                           </li>
                           <li>
                              
                              <p>关联值：启动的子流程的业务关联键（BizKey）。</p>
                              
                           </li>
                           <li>
                              
                              <p>异步：是否异步执行，如果异步执行，则流程启动子流程之后直接向下流转，否则则需等待子流程结束后，才会向下流转。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1629"></a>7.4.4. 线条
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>标识流程走向的线条，可以配置表达式和排序属性</p>
                  
                  <div align="center"><img width="600" src="images/designer.use.22.png" align="middle"></div>
                  
                  <div>
                     <ul style="list-style-type: disc; ">
                        <li>
                           
                           <p>排序：此属性一般用在排他网关后面的线条，排他网关会根据线条排序依次判断线条表达式，取第一个返回true的线条流转。</p>
                           
                        </li>
                        <li>
                           
                           <p>表达式：此表达式可返回bool类型，如果为true,则表示线条可以通过，反之亦然。如果一个节点后面的线条都返回了false，则会抛出异常。</p>
                           
                        </li>
                     </ul>
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1640"></a>7.4.5.  事件 
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1642"></a>7.4.5.1. 空开始事件
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>空的开始事件是指需要用户手工启动的流程，此节点只需要配置节点名称即可，不需要配置其他属性，此节点用来标示流程的开始地点。</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.23.png" align="middle"></div>
                     
                     <div style="margin-left: 0.5in; margin-right: 0.5in;">
                        <h3 class="title">注意</h3>
                        
                        
                        <p>一个流程图上只能有一个空的开始事件。</p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1651"></a>7.4.5.2. 时间开始事件
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>时间开始事件主要用于定时启动流程。</p>
                     
                     <p>此节点除了要配置基本属性外，还需要配置流程定时启动的时间点或者时间表达式。</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.24.png" align="middle"></div>
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>时间点：此属性可以返回标准时间格式，如“"2014-11-04
                                 10:19:29"”,也可以返回java.util.Date类型的对象。
                              </p>
                              
                           </li>
                           <li>
                              
                              <p>周期时间：此属性可返回cron表达式（需要双引号），也可以返回Trigger、List&lt;Trigger&gt;对象。具体cron表达式可以从网上查询，或者从表达式编辑器中添加示例。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1663"></a>7.4.5.3. 空结束事件
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>空结束事件是标识流程正常结束的节点，此节点只需要配置节点名称即可，当流程走到此节点时，会自动结束流程实例。</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.25.png" align="middle"></div>
                     
                     <div style="margin-left: 0.5in; margin-right: 0.5in;">
                        <h3 class="title">注意</h3>
                        
                        
                        <p>只有当所有激活的分支全部走到结束节点时，才会完全结束流程实例。</p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1672"></a>7.4.5.4. 终止结束事件
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>终止结束事件是标识流程异常终止的节点。</p>
                     
                     <p>此节点只需要配置节点名称，当流程走到此节点是，会自动终止流程实例，并将流程实例设置为终止状态。</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.26.png" align="middle"></div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1679"></a>7.4.5.5. 捕获时间节点
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>此节点主要用于流程等待一段时间之后再次启动的场景。</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.27.png" align="middle"></div>
                     
                     <p>节点时间配置见时间开始事件</p>
                     
                     <div style="margin-left: 0.5in; margin-right: 0.5in;">
                        <h3 class="title"></h3>
                        
                        
                        <p>此节点如果配置了周期时间，则只会在周期时间的第一个执行，忽略后面的周期。</p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1689"></a>7.4.5.6. 边界时间事件
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>此节点主要用于边界事件，用户可以在任务到达某个活动节点后，定时去执行其他任务，如超时处理、超时通知等。</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.28.png" align="middle"></div>
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>终止活动：在满足事件触发条件后（如到达特定时间），则流程会根据边界事件的线条向下流转，如超时处理。</p>
                              
                           </li>
                           <li>
                              
                              <p>非终止活动：在事件触发后，会并行向下执行，如超时通知等。 </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1700"></a>7.4.6.  网关 
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>网关主要是判断流程分支走向的功能。</p>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1703"></a>7.4.6.1. 排他网关
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>此网关后面线条只会走一个，引擎会根据线条排序依次判断是否满足条件，取第一个满足条件的线条向下，线条表达式都不满足则抛出异常。</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.29.png" align="middle"></div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1709"></a>7.4.6.2. 并行网关
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>此网关会不判断线条表达式，直接全部并行处理。并行网关应该成对使用，对于分散的分支，最后必须由合并类型的并行网关进行合并。</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.30.png" align="middle"></div>
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>进出类型：分散或者合并，分散是指由一条线分散为多个分支，合并是指由多个分支合并为一个分支。</p>
                              
                           </li>
                           <li>
                              
                              <p>合并策略：线条数量合并会根据到达的线条数量判断是否合并结束，令牌数量是根据分支产生的令牌来计算是否合并结束。</p>
                              
                              <p>实际使用中，一般多用令牌策略，对于简单分散合并都能满足，令牌策略的选择主要用于复杂网关合并，如网关嵌套等复杂功能时才会根据实际场景进行选择。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1721"></a>7.4.6.3. 包容网关
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>此网关会根据线条条件进行分支分散，和并行网关不同的是，此网关只会走满足线条表达式的路线。</p>
                     
                     <div align="center"><img width="600" src="images/designer.use.31.png" align="middle"></div>
                     
                     <p>此网关分之后，必须通过合并类型的并行网关进行合并操作，并且合并策略选择令牌策略。</p>
                     
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1728"></a>7.4.7. 图形
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1730"></a>7.4.7.1. 泳道
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>目前泳道主要是为了流程布局美观清晰使用。</p>
                     
                  </div>
                  
               </div>
               
            </div>
            
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d5e1733"></a>7.5. 流程定义管理
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p>设计好流程之后，需要将流程发布到数据库才能被引擎使用。</p>
               
               <p>此功能必须连接webServer才能使用，也就是说在流程开发过程中，只要同步一次资源，其他时间可以脱机开发，但是发布时需要连接正在运行的server。</p>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1737"></a>7.5.1. 发布流程定义
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>右键点击流程.bpmn文件，选择流程操作，点击发布按钮</p>
                  
                  <div align="center"><img width="600" src="images/designer.use.32.png" align="middle"></div>
                  
                  
                  <div style="margin-left: 0.5in; margin-right: 0.5in;">
                     <h3 class="title"></h3>
                     
                     
                     <p>如果流程发布和更新按钮都是不可点击状态，则需要手工打开bpmn文件，删除process节点上的dbId属性,因为FoxBPM默认一个bpmn文件就是一个版本，如果已经存在dbId,则只能进行更新操作。</p>
                     
                  </div>
                  
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1746"></a>7.5.2. 更新流程定义
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>右键点击流程.bpmn文件，选择流程操作，选中需要更新的定义，点击更新。</p>
                  
                  <div align="center"><img width="600" src="images/designer.use.32.png" align="middle"></div>
                  
                  <div style="margin-left: 0.5in; margin-right: 0.5in;">
                     <h3 class="title"></h3>
                     
                     
                     <p>只有发布过的流程才能更新，也就是说有dbId的流程文件才能进行更新操作。</p>
                     
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1755"></a>7.5.3. 删除流程定义
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>在文件夹或包上右键流程操作是 ，会将数据库中所有的流程定义都列出，供删除。</p>
                  
                  <div align="center"><img width="600" src="images/designer.use.33.png" align="middle"></div>
                  
                  <div style="margin-left: 0.5in; margin-right: 0.5in;">
                     <h3 class="title"></h3>
                     
                     
                     <p>注：删除流程定义后，如果想再次发布，则需要手工打开bpmn文件，删除process节点上的dbId属性。</p>
                     
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1764"></a>7.5.4. 下载流程定义
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>在文件夹或包上右键流程操作是 ，会将数据库中所有的流程定义都列出，供下载。</p>
                  
                  <div align="center"><img width="600" src="images/designer.use.33.png" align="middle"></div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1770"></a>7.5.5. 创建新版本
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>右键点击流程.bpmn文件，选择流程操作，点击创建新版本，填写版本信息，则会在同一位置生成一个新的流程文件，可以进行发布操作。</p>
                  
                  <div align="center"><img width="600" src="images/designer.use.32.png" align="middle"></div>
                  
                  
               </div>
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d5e1776"></a>7.6. 连接器和选择器
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <p>FoxBPM将项目中可能遇到的通用功能封装成可视化的插件，称为连接器，如邮件、如连接微博，ESB等，都可以封装成连接器</p>
               
               <p>引擎默认提供了几种常用的连接器，如果需要自定义连接器，可以按照如下步骤。</p>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1780"></a>7.6.1. 连接器的创建
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>用户在创建连接器之前要了解FoxBPM对连接器的处理。</p>
                  
                  <p>FoxBPM将连接器分为两类，一类为系统默认连接器，一类为用户自定义连接器。系统连接器是foxbpm-connector.jar，默认必须添加。
                     自定义连接器可以是自己创建的，也可以是其他FoxBPM用户创建之后共享的，不管是自己创建的，还是其他用户共享的，都需要注册到自己的引擎中，并且在设计流程之前同步到本地才能使用。
                  </p>
                  
                  <p>自定义连接器步骤如下：</p>
                  
                  <div>
                     <ol type="1">
                        <li>
                           
                           <p>首先，需要用户建立自定义的连接器菜单文件，这里我取名CustomConnectorMenu.xml，放到我的web项目中</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.34.png" align="middle"></div>
                           <pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;connectormenu:Menu xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:connectormenu="http://www.foxbpm.org/connectormenu"&gt;
  &lt;flowConnector&gt;
  	&lt;node id="71e8d50f-5d55-4b03-88b0-dbe37bc8fed33" name="自定义" ico="group_16.png"&gt;
    &lt;/node&gt;
  &lt;/flowConnector&gt;
  &lt;actorConnector&gt;
    &lt;node id="71e8d50f-5d55-4b03-88b0-dbe37bc8fedf" name="自定义" ico="group_16.png"&gt;
    &lt;/node&gt;
  &lt;/actorConnector&gt;
&lt;/connectormenu:Menu&gt;                
                    </pre>
                           </li>
                        <li>
                           
                           <p>在首选项中配置连接器的menu地址，就是上面我们创建的文件的物理路径。</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.35.png" align="middle"></div>
                           
                        </li>
                        <li>
                           
                           <p>然后在需要创建连接器的包上右键-&gt;New-&gt;other-&gt;FoxBPM-&gt;创建连接器，打开创建连接器的界面。</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.36.png" align="middle"></div>
                           
                        </li>
                        <li>
                           
                           <p>填写连接器基本信息，这里我以发送短信为例子</p>
                           
                           <p>发送短信，我需要收件人手机号和短信内容两个参数，并且将两个参数放到一个页面上，所以填好之后如下</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.37.png" align="middle"></div>
                           
                        </li>
                        <li>
                           
                           <p>点击“完成”之后，会在选中的目录，生成新的包，如sendMessage，包下有三个文件，SendMessage.java，connecto.xml,SendMessage.png，也就是一个完成的连接器必须有的三个文件。
                              其中：SendMessage.java是连接器的实现逻辑，需要再excute方法中写入发送短信的逻辑，如调用短信猫接口等。connector.xml中记录了连接器的结构信息。
                              除创建文件之外，还会在上面的CustomConnectorMenu.xml中写入对应信息（如果是其他用户共享连接器，需要手工填写这段xml）。
                           </p>
                           
                           <div align="center"><img width="600" src="images/designer.use.38.png" align="middle"></div>
                           
                           <div align="center"><img width="600" src="images/designer.use.39.png" align="middle"></div>
                           
                        </li>
                     </ol>
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1816"></a>7.6.2. 连接器的注册
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <div>
                     <ol type="1">
                        <li>
                           
                           <p>将CustomConnectorMenu.xml注册给流程引擎，如spring配置：</p>
                           
                           <div align="center"><img width="600" src="images/designer.use.40.png" align="middle"></div>
                           <pre class="prettyprint">

	&lt;!-- 流程引擎配置 --&gt;
	&lt;bean id="processEngineConfigurationSpring"
		class="org.foxbpm.engine.spring.ProcessEngineConfigurationSpring"&gt;
		&lt;property name="dataSource" ref="foxbpmDataSource" /&gt;
		&lt;property name="transactionManager" ref="foxbpmTransactionManager" /&gt;
		&lt;property name="foxbpmScheduler" ref="foxbpmScheduler"&gt;&lt;/property&gt;
		&lt;property name="connectorMenuPath" value="conf/CustomConnectorMenu.xml"&gt;&lt;/property&gt;
		&lt;property name="configXmlPath" value="conf/foxbpmconfig.xml"&gt;&lt;/property&gt;
	&lt;/bean&gt;                        
                    </pre>
                           </li>
                        <li>
                           
                           <p> 然后重启服务，点击流程同步，就可以将新的连接器同步到本地，在设计流程的时候就可以直接使用新的连接器了。 </p>
                           
                           <div align="center"><img width="600" src="images/designer.use.41.png" align="middle"></div>
                           
                           <div align="center"><img width="600" src="images/designer.use.42.png" align="middle"></div>
                           
                        </li>
                     </ol>
                  </div>
                  
                  
                  <div style="margin-left: 0.5in; margin-right: 0.5in;">
                     <h3 class="title"></h3>
                     
                     
                     <p>上面创建连接器的目录，必须在classpath中。如果是其他用户共享的连接器，需要将对应jar包放到lib下。</p>
                     
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1836"></a>7.6.3. 处理人选择器
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>选择器的创建和连接器基本一致，用户可以尝试进行创建。</p>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1839"></a>7.6.4.  连接器和选择器的共享
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>一个完整的连接器应该包含**.java，**.png，connector.xml三个文件，将三个文件导出jar包，在配合详细的说明文档，就可以共享给其他用户使用了。</p>
                  
               </div>
               
            </div>
            
            <div>
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d5e1842"></a>7.7. 附录：系统默认连接器和选择器功能介绍
                        </h2>
                     </div>
                  </div>
               </div>
               
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1844"></a>7.7.1. 连接器
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <p>连接器主要类似java监听的功能，可在流程运转的过程中额外的做一些其他功能，如发送邮件，记录流程信息等。</p>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1847"></a>7.7.1.1. 发送邮件
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p> 功能描述：根据配置的“主题”，“收件人”，“抄送人”，“正文”发送邮件，如任务结束时，需要邮件通知发起人任务已经结束。</p>
                     
                     <p>说明</p>
                     
                     <div>
                        <ol type="1">
                           <li>
                              
                              <p>该发送邮件不是立即发送，而是将邮件信息存入数据库foxbpm_mail中，有系统定时任务根据foxbpm_mail表内容来处理发送邮件。</p>
                              
                           </li>
                           <li>
                              
                              <p>其中“发件人”，“抄送人”可以使多个（以分号分隔）。</p>
                              
                           </li>
                        </ol>
                     </div>
                     
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1856"></a>7.7.1.2. 自动邮件发送
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>  功能描述：根据配置的“主题”，“正文”自动实现邮件发送（该连接器针对任务分配有效）连接器触发时机选择“分配”。</p>
                     
                     <p>说明:</p>
                     
                     <div>
                        <ol type="1">
                           <li>
                              
                              <p>只有选择连接事件为“分配”该连接器才有效。</p>
                              
                           </li>
                           <li>
                              
                              <p>此连接器目前并不完整，实用性也不高，实际使用场景中，如果是分配人是部门，则一般企业都会有部门邮箱，而不是将部门所有人都取出来单独发邮件通知，每个人都发邮件会极大影响性能，另外邮件内容也应该有邮件模板来控制。
                                 所以，在实际场景中，应该由用户自己开发类似功能连接器，根据公司情况考虑好性能及邮件内容，如果是短信通知，也可仿照此连接器开发。
                              </p>
                              
                           </li>
                        </ol>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1865"></a>7.7.1.3. WebServices
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>功能描述：根据配置webservice信息，调用webservice接口返回响应结果。</p>
                     
                     <p>注意</p>
                     
                     <div>
                        <ol type="1">
                           <li>
                              
                              <p>该连接器需要输入参数，而且相关参数必须有值。</p>
                              
                           </li>
                           <li>
                              
                              <p>该链接存在返回值。</p>
                              
                           </li>
                        </ol>
                     </div>
                     
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1874"></a>7.7.1.4. Groovy
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>执行Groovy脚本</p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1877"></a>7.7.1.5. JDBCDatabaseQuery
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <p>根据输入的数据库驱动、url、用户名、密码，执行查询sql并返回结果。</p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1880"></a>7.7.1.6. 连接器使用注意事项
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ol type="1">
                           <li>
                              
                              <p>连接器使用过程中，必须要注意连接器的监听事件，各时机取到的引擎参数都有可能不同，如“任务分配信息”只有在“分配”事件上才能获得。</p>
                              
                           </li>
                           <li>
                              
                              <p>连接器目前执行错误会直接导致流程中断，并回滚事务（需要引擎配置了事务管理），后期可能会加上异常处理handler功能，用来灵活捕获异常。</p>
                              
                           </li>
                        </ol>
                     </div>
                     
                     
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1887"></a>7.7.2. 处理人选择器
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1889"></a>7.7.2.1. 发起人
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能描述：根据配置的“主题”，“收件人”，“抄送人”，“正文”发送邮件。</p>
                              
                           </li>
                           <li>
                              
                              <p> 说明：例如任务分配时需要提示任务处理，这时候可以配置“发送邮件“连接器来通知。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <div style="margin-left: 0.5in; margin-right: 0.5in;">
                        <h3 class="title">说明</h3>
                        
                        
                        
                        <div>
                           <ul style="list-style-type: disc; ">
                              <li>
                                 
                                 <p>该发送邮件不是立即发送，而是将邮件信息存入数据库foxbpm_mail中，有系统定时任务根据foxbpm_mail表内容来处理发送邮件。</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>若需使用此连接器，必须在引擎配置中配置好系统邮件的服务器地址、用户名、密码等信息。</p>
                                 
                              </li>
                              <li>
                                 
                                 <p> 其中“发件人”，“抄送人”可以使多个（以分号分隔）。</p>
                                 
                              </li>
                           </ul>
                        </div>
                        
                     </div>
                     
                     <p></p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1906"></a>7.7.2.2. 所有人
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能描述：所有人都可以处理该任务。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p></p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1912"></a>7.7.2.3. 启动人
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能描述：流程的启动人。</p>
                              
                           </li>
                           <li>
                              
                              <p>
                                 说明：在一般情况下，流程的启动人和发起人是同一个，但是如果流程是通过API来启动的，此值可能不同。取值来自foxbpm_run_processInstance的startAuthor字段。
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p></p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1920"></a>7.7.2.4. 上一步骤处理者
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能描述：上一步骤的处理者。</p>
                              
                           </li>
                           <li>
                              
                              <p>
                                 说明：此选择器会自动选择上一步骤的处理者。如果分支合并的时候选择此连接器，则会找最后一个分支的处理者，所以分支合并不建议用此选择器。
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p></p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1928"></a>7.7.2.5. 选择用户
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能描述：选择指定ID的用户。</p>
                              
                           </li>
                           <li>
                              
                              <p>
                                 说明：选择用户的表达式中，可以返回Collection、List&lt;String&gt;、“user1,user2,user3”这三种格式。如果返回结果只有一个用户，则任务未独占方式，否则为共享任务。
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p></p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1936"></a>7.7.2.6. 选择部门
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能描述：选择指定编号的部门。</p>
                              
                           </li>
                           <li>
                              
                              <p>
                                 说明：可以返回Collection、List&lt;String&gt;、“dept1,dept2,dept3”这三种格式,任务为共享任务。此连接器需要在引擎启动的时候配置好角色部门的实现。
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <div style="margin-left: 0.5in; margin-right: 0.5in;">
                        <h3 class="title"></h3>
                        
                        
                        <p>如果引擎初始化时配置组织机构错误，可能导致此连接器无法使用。</p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1946"></a>7.7.2.7. 选择角色
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能描述：选择指定编号的角色。</p>
                              
                           </li>
                           <li>
                              
                              <p>
                                 说明：可以返回Collection、List&lt;String&gt;、“dept1,dept2,dept3”这三种格式,任务为共享任务。此连接器需要在引擎启动的时候配置好角色部门的实现。
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <div style="margin-left: 0.5in; margin-right: 0.5in;">
                        <h3 class="title"></h3>
                        
                        
                        <p>如果引擎初始化时配置组织机构错误，可能导致此连接器无法使用。</p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1956"></a>7.7.2.8. 资源中任务最少者
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能描述：配置一个用户组，自动计算组中任务最少的用户，将任务分给此人独占。</p>
                              
                           </li>
                           <li>
                              
                              <p>
                                 说明：可以返回Collection、List&lt;String&gt;、“user1,user2,user3”这三种格式,任务为独占任务。
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <div style="margin-left: 0.5in; margin-right: 0.5in;">
                        <h3 class="title"></h3>
                        
                        
                        <p>此选择器计算量较大，性能不可靠，建议关键业务少用或者优化计算方式。</p>
                        
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1966"></a>7.7.2.9. 资源中随机分配
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能描述：配置一个用户组，自动随机选择组中的用户，将任务分给此人独占。</p>
                              
                           </li>
                           <li>
                              
                              <p>
                                 说明：可以返回Collection、List&lt;String&gt;、“user1,user2,user3”这三种格式,任务为独占任务。
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1973"></a>7.7.2.10. 选择某部门和某角色
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能描述：用户配置角色编号和部门编号，系统会自动计算此部门此角色的人员。如”财务部“”主管“审批。</p>
                              
                           </li>
                           <li>
                              
                              <p> 说明：无</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p></p>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1981"></a>7.7.2.11. 选择部门（包含子部门）
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能描述：此选择器会自动选择指定部门编号下的所有人员，包含子部门。</p>
                              
                           </li>
                           <li>
                              
                              <p> 说明：无</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
               </div>
               
               <div>
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d5e1988"></a>7.7.3. 任务命令
                           </h3>
                        </div>
                     </div>
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1990"></a>7.7.3.1. 通用
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能说明：结束当前任务，"同意"流程向下运转</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e1999"></a>7.7.3.2. 启动并提交
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能说明：启动一条流程，并在第一个人工节点做提交操作。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无</p>
                              
                           </li>
                           <li>
                              
                              <p>说明：需要和“提交”命令一起使用。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2010"></a>7.7.3.3. 提交
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能说明：提交流程，一般此时或设置或修改bizKey和initator字段。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2019"></a>7.7.3.4. 接收任务
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能说明：共享任务时，如果是手工领取方式，则需要此命令来领取任务才能看到待办任务。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2028"></a>7.7.3.5. 释放任务
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>共享任务时，如果是手工领取方式，那么在任务被领取以后，可以使用此按钮进行任务释放操作。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2037"></a>7.7.3.6. 保存草稿
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>开始节点，只启动，不提交，并且将任务设置为草稿状态。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2046"></a>7.7.3.7. 转发-创建新任务
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>将当前任务转发给其他人，并且会生成新的任务（留下转发痕迹）。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：</p>
                              
                              <div>
                                 <ol type="1">
                                    <li>
                                       
                                       <p>transferUserId:转发目的人</p>
                                       
                                    </li>
                                 </ol>
                              </div>
                              
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2058"></a>7.7.3.8. 转发
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>将当前任务转发给其他人，不会创建新任务（不会留下痕迹）。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：</p>
                              
                              <div>
                                 <ol type="1">
                                    <li>
                                       
                                       <p>transferUserId:转发目的人</p>
                                       
                                    </li>
                                 </ol>
                              </div>
                              
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2070"></a>7.7.3.9. 退回重新分配
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>将流程退回到指定节点，并且重新分配任务。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：</p>
                              
                              <div>
                                 <ol type="1">
                                    <li>
                                       
                                       <p>rollbackNodeId:退回目的节点。</p>
                                       
                                    </li>
                                 </ol>
                              </div>
                              
                           </li>
                           <li>
                              
                              <p>说明：如果分支退回到主线时，会结束当前的所有分支；不能由主线退回到分支内。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2084"></a>7.7.3.10. 退回上一步
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>自动计算并退回到流程的上一步骤,任务处理者为上一步骤的处理者。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无。</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2093"></a>7.7.3.11. 退回-指定处理者
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>退回到前台用户指定的节点和处理者。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无。</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：</p>
                              
                              <div>
                                 <ol type="1">
                                    <li>
                                       
                                       <p>rollBackNodeId：退回节点号。</p>
                                       
                                    </li>
                                    <li>
                                       
                                       <p>rollBackAssignee：退回的指定处理者。</p>
                                       
                                    </li>
                                 </ol>
                              </div>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2107"></a>7.7.3.12. 退回-后台指定步骤-重新分配
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能说明：在设计器上指定退回的节点，退回到节点后任务被重新分配。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：</p>
                              
                              <div>
                                 <ol type="1">
                                    <li>
                                       
                                       <p>rollBackNodeId：退回节点号。</p>
                                       
                                    </li>
                                 </ol>
                              </div>
                              
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2119"></a>7.7.3.13. 退回-后台指定步骤-自动最近处理者
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能说明：在设计器上指定退回的节点，退回后，任务被自动分配给最近一次任务的处理者。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：</p>
                              
                              <div>
                                 <ol type="1">
                                    <li>
                                       
                                       <p>rollBackNodeId：退回节点号。</p>
                                       
                                    </li>
                                 </ol>
                              </div>
                              
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2131"></a>7.7.3.14. 退回-后台指定步骤-自动最近处理者
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能说明：将任务给其他人处理，处理人只会有“还回”权限，并且会生成记录。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：</p>
                              
                              <div>
                                 <ol type="1">
                                    <li>
                                       
                                       <p>pendingUserId:转办目的人。</p>
                                       
                                    </li>
                                 </ol>
                              </div>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2143"></a>7.7.3.15. 还回
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能说明：见转办。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无。</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2152"></a>7.7.3.16. 终止
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能说明：强制终止流程实例，将流程实例设置为终止状态，结束流程上所有任务和令牌等。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无。</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无。</p>
                              
                           </li>
                           <li>
                              
                              <p>说明：在子流程中使用此命令时，则会连同主流程一起被结束掉。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2163"></a>7.7.3.17. 暂时实例
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能说明：暂停流程实例，本任务会被暂停，任务命令只剩下“流程状态”和“恢复实例”。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无。</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2172"></a>7.7.3.18. 恢复实例
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能说明：恢复被暂停的流程实例。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无。</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2181"></a>7.7.3.19. 流程状态
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ul style="list-style-type: disc; ">
                           <li>
                              
                              <p>功能说明：展现流程的处理过程和流程图等信息。</p>
                              
                           </li>
                           <li>
                              
                              <p>执行参数：无。</p>
                              
                           </li>
                           <li>
                              
                              <p>界面收集参数：无。</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  
                  <div>
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title"><a name="d5e2190"></a>7.7.3.20. 命令注意事项
                              </h4>
                           </div>
                        </div>
                     </div>
                     
                     
                     <div>
                        <ol type="1">
                           <li>
                              
                              <p>退回类型的按钮，在使用时一定要注意场景，尤其是在并行分支中、多实例场景中使用时，一定要详细考虑场景及相应的功能。</p>
                              
                           </li>
                           <li>
                              
                              <p>引擎执行参数是必须在设计器上就指定的参数，具体应用是说，在设计流程的时候，开发人员已经指定了这个参数的值，如应该退回到哪个节点。</p>
                              
                           </li>
                           <li>
                              
                              <p>带有页面收集参数的命令，都是需要前端自己配合实现的，具体应用是说，这种参数都应该由最终客户在页面上选择的。</p>
                              
                           </li>
                           <li>
                              
                              <p>任务命令不满足功能时，自己可以根据二开文档进行任务命令的扩展。</p>
                              
                           </li>
                           <li>
                              
                              <p>每个任务命令在foxbpm-engine的test类中都有对应的test类，里面有详细使用说明以及测试用例。</p>
                              
                           </li>
                        </ol>
                     </div>
                     
                  </div>
                  
               </div>
               
            </div>
            
         </div>
         
      </div>
   </body>
</html>